"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4140],{3077:(J,A,a)=>{a.d(A,{n:()=>I});var g=a(5861),P=a(8305),i=a(4650),p=a(603),y=a(2669),e=a(6895),O=a(8559);function T(v,m){if(1&v){const d=i.EpF();i.TgZ(0,"ion-refresher",10),i.NdJ("ionRefresh",function(f){i.CHM(d);const E=i.oxw();return i.KtG(E.doRefresh(f))}),i._UZ(1,"ion-refresher-content"),i.qZA()}}function r(v,m){if(1&v){const d=i.EpF();i.TgZ(0,"ion-item",12),i.NdJ("click",function(){const E=i.CHM(d).$implicit,k=i.oxw(3);return i.KtG(k.onOpenDetails(E))}),i.TgZ(1,"ion-label")(2,"div")(3,"h3")(4,"strong"),i._uU(5),i.ALo(6,"numberLeadZero"),i.TgZ(7,"ion-text",13),i._uU(8),i.qZA()()()()()()}if(2&v){const d=m.$implicit;let _;i.xp6(5),i.hij("ID #: ",i.xi3(6,3,d.reservationId,5)," "),i.xp6(2),i.Q6J("color",("1"===d.reservationStatus.reservationStatusId||"4"===d.reservationStatus.reservationStatusId?"danger":"")||("2"===d.reservationStatus.reservationStatusId?"primary":"")||(null!==(_="3"===d.reservationStatus.reservationStatusId)&&void 0!==_?_:"tertiary")),i.xp6(1),i.hij(" ",d.reservationStatus.name," ")}}function h(v,m){if(1&v&&(i.TgZ(0,"ion-list"),i.YNc(1,r,9,6,"ion-item",11),i.qZA()),2&v){const d=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",d.reservation)}}function M(v,m){if(1&v&&(i.TgZ(0,"div"),i.YNc(1,h,2,1,"ion-list",7),i.qZA()),2&v){const d=i.oxw(),_=i.MAs(14);i.xp6(1),i.Q6J("ngIf",d.reservation.length>0)("ngIfElse",_)}}function x(v,m){1&v&&(i.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"div")(4,"h3",14),i._UZ(5,"ion-skeleton-text",15),i.qZA(),i.TgZ(6,"p"),i._UZ(7,"ion-skeleton-text",15),i.qZA(),i.TgZ(8,"p",16),i._UZ(9,"ion-skeleton-text",15),i.qZA()()()()()),2&v&&(i.xp6(5),i.Q6J("animated",!0),i.xp6(2),i.Q6J("animated",!0),i.xp6(2),i.Q6J("animated",!0))}function b(v,m){1&v&&(i.TgZ(0,"div",17),i._UZ(1,"ion-icon",18),i.TgZ(2,"h3",19),i._uU(3,"No recent reservations to show"),i.qZA()())}class I{actionSheetController;modalCtrl;alertController;reservationService;currentUser;isLoading=!1;reservation=[];message="";refreshEvent;currentPage=1;limit=10;totalUnreadNotification=0;constructor(m,d,_,f){this.actionSheetController=m,this.modalCtrl=d,this.alertController=_,this.reservationService=f}ngOnInit(){this.initHistory(this.currentUser.customerId)}initHistory(m){var d=this;return(0,g.Z)(function*(){try{d.isLoading=!0,d.reservationService.getByStatus({customerId:m,reservationStatus:"Completed,Cancelled"}).subscribe(function(){var _=(0,g.Z)(function*(f){f.success?(d.reservation=f.data,d.refreshEvent&&(d.refreshEvent.target.complete(),d.refreshEvent=null),d.isLoading=!1):yield d.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(f.message)?f.message[0]:f.message,buttons:["OK"]})});return function(f){return _.apply(this,arguments)}}(),function(){var _=(0,g.Z)(function*(f){yield d.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(f.message)?f.message[0]:f.message,buttons:["OK"]}),d.isLoading=!1});return function(f){return _.apply(this,arguments)}}())}catch(_){yield d.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(_.message)?_.message[0]:_.message,buttons:["OK"]})}})()}onOpenDetails(m){var d=this;return(0,g.Z)(function*(){const _=yield d.modalCtrl.create({component:P.O,cssClass:"modal-fullscreen",componentProps:{details:m,currentUser:d.currentUser}});_.present(),yield _.onWillDismiss()})()}loadMore(){var m=this;return(0,g.Z)(function*(){m.currentPage=m.currentPage+1,m.initHistory(m.currentUser.customerId)})()}doRefresh(m){var d=this;return(0,g.Z)(function*(){d.reservation=[],d.currentPage=1,d.refreshEvent=m,d.initHistory(d.currentUser.customerId)})()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}presentAlert(m){var d=this;return(0,g.Z)(function*(){yield(yield d.alertController.create(m)).present()})()}static \u0275fac=function(d){return new(d||I)(i.Y36(p.BX),i.Y36(p.IN),i.Y36(p.Br),i.Y36(y.D))};static \u0275cmp=i.Xpm({type:I,selectors:[["app-booking-history"]],decls:15,vars:4,consts:[["no-border","","no-shadow",""],["slot","start"],[3,"disabled","click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseLoading",""],["elseNoData",""],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",3,"click"],[3,"color"],[1,"title",2,"width","50%"],[3,"animated"],[2,"width","40%"],[1,"no-records"],["name","search-outline",2,"font-size","4em"],[1,"text"]],template:function(d,_){if(1&d&&(i.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),i.NdJ("click",function(){return _.cancel()}),i._UZ(4,"ion-icon",3),i.qZA()(),i.TgZ(5,"ion-title",4),i._uU(6,"History"),i.qZA(),i._UZ(7,"div",5),i.qZA()(),i.TgZ(8,"ion-content"),i.YNc(9,T,2,0,"ion-refresher",6),i.YNc(10,M,2,2,"div",7),i.YNc(11,x,10,3,"ng-template",null,8,i.W1O),i.YNc(13,b,4,0,"ng-template",null,9,i.W1O),i.qZA()),2&d){const f=i.MAs(12);i.xp6(3),i.Q6J("disabled",_.isLoading),i.xp6(6),i.Q6J("ngIf",!_.isLoading),i.xp6(1),i.Q6J("ngIf",!_.isLoading)("ngIfElse",f)}},dependencies:[e.sg,e.O5,p.YG,p.Sm,p.W2,p.Gu,p.gu,p.Ie,p.Q$,p.q_,p.nJ,p.Wo,p.CK,p.yW,p.wd,p.sr,O.O],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}ion-item[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-label[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.no-records[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px}  ion-item .un-read .title{font-weight:800px!important}"]})}},4831:(J,A,a)=>{a.r(A),a.d(A,{BookingListPagePageModule:()=>h});var g=a(6895),P=a(4006),i=a(603),p=a(9773),y=a(7903),e=a(4650);const O=[{path:"",component:y.p}];class T{static \u0275fac=function(b){return new(b||T)};static \u0275mod=e.oAB({type:T});static \u0275inj=e.cJS({imports:[p.Bz.forChild(O),p.Bz]})}var r=a(5815);class h{static \u0275fac=function(b){return new(b||h)};static \u0275mod=e.oAB({type:h});static \u0275inj=e.cJS({imports:[g.ez,P.u5,i.Pc,T,r.d]})}},7903:(J,A,a)=>{a.d(A,{p:()=>C});var g=a(5861),P=a(8349),i=a(5671),p=a(8305),y=a(8164),e=a(4650),O=a(2669),T=a(3746),r=a(8791),h=a(603),M=a(9773),x=a(7956),b=a(6895),I=a(8559);function v(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-icon",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw().$implicit,u=e.oxw(3);return e.KtG(c.orderItems.length>1?u.onRemoveItem(s):u.cancelReservation(c.reservationId))}),e.qZA()}}function m(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-list",17)(1,"ion-item",18)(2,"ion-label",10),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw().$implicit,Z=e.oxw(3);return e.KtG(Z.onOpenItemDetails(u,c))}),e.TgZ(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"div",19)(6,"h2",20),e._uU(7),e.qZA()()(),e.YNc(8,v,1,0,"ion-icon",21),e.qZA()()}if(2&l){const t=n.$implicit,o=e.oxw().$implicit,s=e.oxw(3);e.Q6J("lines",o.orderItems.length>1?"":"none"),e.xp6(4),e.AsE("x",t.quantity,"\xa0-\xa0",t.orderItemType.name,""),e.xp6(3),e.Oqu(t.remarks),e.xp6(1),e.Q6J("ngIf",s.canEdit)}}function d(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-list",8)(1,"ion-item",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.onAddItem(s))}),e._UZ(2,"ion-icon",24),e.TgZ(3,"ion-label")(4,"h3"),e._uU(5,"Add more item"),e.qZA()()()()}}function _(l,n){if(1&l&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Required completion date: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&l){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,t.reqCompletionDate,"MMMM dd, yyyy"))}}function f(l,n){if(1&l&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Estimated completion date: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&l){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,t.estCompletionDate,"MMMM dd, yyyy"))}}function E(l,n){if(1&l&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Assigned person: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.qZA()()()),2&l){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.staff.name+" "+t.staff.name)}}function k(l,n){if(1&l&&(e.TgZ(0,"h3")(1,"ion-text",25),e._uU(2),e.qZA()()),2&l){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.reservationLevel.name)}}function L(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-list",8)(1,"ion-item",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.cancelReservation(s.reservationId))}),e._UZ(2,"ion-icon",26),e.TgZ(3,"ion-label")(4,"h3")(5,"ion-text",27),e._uU(6,"Cancel"),e.qZA()()()()()}}function D(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-card",7)(1,"ion-card-header")(2,"ion-list",8)(3,"ion-item",9)(4,"ion-label")(5,"h2",10),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw(3);return e.KtG(u.onOpenDetails(c))}),e._uU(6),e.ALo(7,"numberLeadZero"),e.qZA()(),e.TgZ(8,"ion-badge",11),e._uU(9),e.qZA()()()(),e.TgZ(10,"ion-card-content"),e.YNc(11,m,9,5,"ion-list",12),e.YNc(12,d,6,0,"ion-list",13),e.qZA(),e.TgZ(13,"div",14)(14,"div",15),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw(3);return e.KtG(u.onOpenDetails(c))}),e.YNc(15,_,7,4,"div",16),e.YNc(16,f,7,4,"div",16),e.YNc(17,E,6,1,"div",16),e.YNc(18,k,3,1,"h3",16),e.qZA(),e.YNc(19,L,7,0,"ion-list",13),e.qZA()()}if(2&l){const t=n.$implicit,o=e.oxw(3);e.xp6(6),e.hij("#",e.xi3(7,10,t.reservationId,5),""),e.xp6(2),e.Q6J("color",o.status.toLowerCase().includes("approved")?"success":o.status.toLowerCase().includes("pending")?"warning":"secondary"),e.xp6(1),e.Oqu(o.status),e.xp6(2),e.Q6J("ngForOf",t.orderItems),e.xp6(1),e.Q6J("ngIf",o.canEdit),e.xp6(3),e.Q6J("ngIf","1"===t.reservationStatus.reservationStatusId||"2"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf","3"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf","3"===t.reservationStatus.reservationStatusId&&t.staff&&t.staff.name),e.xp6(1),e.Q6J("ngIf","1"===t.reservationStatus.reservationStatusId||"2"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf",o.canEdit)}}function U(l,n){if(1&l&&(e.TgZ(0,"div",5),e.YNc(1,D,20,13,"ion-card",6),e.qZA()),2&l){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.reservationData)}}function B(l,n){if(1&l&&(e.TgZ(0,"div",28),e._UZ(1,"ion-icon",29),e.TgZ(2,"h3"),e._uU(3),e.qZA()()),2&l){const t=e.oxw(2);e.xp6(3),e.hij("No ",t.status.toLowerCase()," records yet")}}function S(l,n){if(1&l&&(e.TgZ(0,"div",2),e.YNc(1,U,2,1,"div",3),e.YNc(2,B,4,1,"ng-template",null,4,e.W1O),e.qZA()),2&l){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.reservationData.length>0)("ngIfElse",t)}}function N(l,n){1&l&&(e.TgZ(0,"div",2)(1,"div",5)(2,"ion-card",7),e._UZ(3,"ion-card-content"),e.qZA()()())}class C{reservationService;storageService;orderItemService;alertController;modalCtrl;router;pageLoaderService;actionSheetController;status="";canEdit=!1;isLoading=!1;reservationData=[];currentUser;constructor(n,t,o,s,c,u,Z,R){this.reservationService=n,this.storageService=t,this.orderItemService=o,this.alertController=s,this.modalCtrl=c,this.router=u,this.pageLoaderService=Z,this.actionSheetController=R,this.currentUser=this.storageService.getLoginUser()}get isAuthenticated(){const n=this.storageService.getLoginUser();return n&&n.customerId&&n.userId&&n.accessToken&&""!==n.customerId&&""!==n.userId&&""!==n.accessToken}ngOnInit(){}getReservation(n,t){var o=this;return(0,g.Z)(function*(){try{o.isLoading=!0,o.reservationService.getByStatus({customerId:n,reservationStatus:t}).subscribe(function(){var s=(0,g.Z)(function*(c){c.success?(o.reservationData=c.data.map(u=>(u.orderItems=u.orderItems.filter(Z=>Z.entityStatus.entityStatusId===P.n.ACTIVE.toString()),u)),o.isLoading=!1):yield o.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(c.message)?c.message[0]:c.message,buttons:["OK"]})});return function(c){return s.apply(this,arguments)}}(),function(){var s=(0,g.Z)(function*(c){yield o.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(c.message)?c.message[0]:c.message,buttons:["OK"]}),o.isLoading=!1});return function(c){return s.apply(this,arguments)}}())}catch(s){yield o.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})}})()}showMenu(n){var t=this;return(0,g.Z)(function*(){const o=yield t.actionSheetController.create({cssClass:"sched-card-action-sheet",buttons:[{text:"Details",handler:(c=(0,g.Z)(function*(){t.onOpenDetails(n),o.dismiss()}),function(){return c.apply(this,arguments)})},{text:"Back",handler:function(){var c=(0,g.Z)(function*(){o.dismiss()});return function(){return c.apply(this,arguments)}}()}]});var c;yield o.present(),yield o.onDidDismiss()})()}onOpenDetails(n){var t=this;return(0,g.Z)(function*(){const o=yield t.modalCtrl.create({component:p.O,cssClass:"modal-fullscreen",componentProps:{details:n,currentUser:t.currentUser}});o.present(),yield o.onWillDismiss().then(function(){var s=(0,g.Z)(function*(c){t.router.navigate(["/booking"],{replaceUrl:!0})});return function(c){return s.apply(this,arguments)}}())})()}onAddItem(n){var t=this;return(0,g.Z)(function*(){const o=yield t.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{reservation:n,canEdit:!0,currentUser:t.currentUser}});o.present(),yield o.onWillDismiss().then(function(){var s=(0,g.Z)(function*(c){c.data&&(yield t.getReservation(t.currentUser.customerId,t.status))});return function(c){return s.apply(this,arguments)}}())})()}onOpenItemDetails(n,t){var o=this;return(0,g.Z)(function*(){const s=yield o.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{details:t,reservation:n,canEdit:o.canEdit,currentUser:o.currentUser}});s.present();const{role:u}=yield s.onWillDismiss();"confirm"===u&&(yield o.getReservation(o.currentUser.customerId,o.status))})()}onRemoveItem(n){var t=this;return(0,g.Z)(function*(){try{yield t.presentAlert({header:"Are you sure you want to remove this item?",buttons:[{text:"CANCEL",role:"cancel"},{text:"YES Continue",role:"confirm",handler:(o=(0,g.Z)(function*(){yield t.pageLoaderService.open("Processing please wait..."),t.isLoading=!0,t.orderItemService.delete(n.orderItemId).subscribe(function(){var s=(0,g.Z)(function*(c){c.success?(yield t.pageLoaderService.close(),yield t.presentAlert({header:"Item deleted!",buttons:["OK"]}),t.isLoading=!1,yield t.pageLoaderService.close(),yield t.getReservation(t.currentUser.customerId,t.status)):(yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(c.message)?c.message[0]:c.message,buttons:["OK"]}))});return function(c){return s.apply(this,arguments)}}(),function(){var s=(0,g.Z)(function*(c){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(c.message)?c.message[0]:c.message,buttons:["OK"]})});return function(c){return s.apply(this,arguments)}}())}),function(){return o.apply(this,arguments)})}]})}catch(o){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(o.message)?o.message[0]:o.message,buttons:["OK"]})}var o})()}cancelReservation(n){var t=this;return(0,g.Z)(function*(){try{yield t.presentAlert({header:"Are you sure you want to cancel reservation?",buttons:[{text:"CANCEL",role:"cancel"},{text:"YES Continue",role:"confirm",handler:(o=(0,g.Z)(function*(){yield t.pageLoaderService.open("Processing please wait..."),t.isLoading=!0,t.reservationService.updateReservationStatus({reservationId:n,reservationStatusId:i.C.CANCELLED}).subscribe(function(){var s=(0,g.Z)(function*(c){c.success?(yield t.pageLoaderService.close(),yield t.presentAlert({header:"Reservation cancelled!",buttons:["OK"]}),t.isLoading=!1,yield t.getReservation(t.currentUser.customerId,t.status)):(yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(c.message)?c.message[0]:c.message,buttons:["OK"]}))});return function(c){return s.apply(this,arguments)}}(),function(){var s=(0,g.Z)(function*(c){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(c.message)?c.message[0]:c.message,buttons:["OK"]})});return function(c){return s.apply(this,arguments)}}())}),function(){return o.apply(this,arguments)})}]})}catch(o){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(o.message)?o.message[0]:o.message,buttons:["OK"]})}var o})()}presentAlert(n){var t=this;return(0,g.Z)(function*(){yield(yield t.alertController.create(n)).present()})()}static \u0275fac=function(t){return new(t||C)(e.Y36(O.D),e.Y36(T.V),e.Y36(r.R),e.Y36(h.Br),e.Y36(h.IN),e.Y36(M.F0),e.Y36(x.p),e.Y36(h.BX))};static \u0275cmp=e.Xpm({type:C,selectors:[["app-booking-list-page"]],inputs:{status:"status",canEdit:"canEdit"},decls:3,vars:2,consts:[["class","booking-list",4,"ngIf","ngIfElse"],["elseLoading",""],[1,"booking-list"],["class","list-data",4,"ngIf","ngIfElse"],["elseNoData",""],[1,"list-data"],["mode","ios",4,"ngFor","ngForOf"],["mode","ios"],["lines","none"],[1,"ion-no-padding"],[3,"click"],["slot","end",2,"color","#fff",3,"color"],[3,"lines",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[1,"action"],[2,"display","flex","flex-direction","column","width","100%",3,"click"],[4,"ngIf"],[3,"lines"],["button","","detail","false",1,"ion-no-padding"],[1,"attribute"],[1,"remarks"],["name","trash-outline",3,"click",4,"ngIf"],["name","trash-outline",3,"click"],["button","","detail","false",1,"ion-no-padding",3,"click"],["name","add-outline"],["color","warning"],["name","close-outline","color","danger"],["color","danger"],[1,"list-none"],["name","document-text-outline"]],template:function(t,o){if(1&t&&(e.YNc(0,S,4,2,"div",0),e.YNc(1,N,4,0,"ng-template",null,1,e.W1O)),2&t){const s=e.MAs(2);e.Q6J("ngIf",!o.isLoading)("ngIfElse",s)}},dependencies:[b.sg,b.O5,h.yp,h.PM,h.FN,h.Zi,h.gu,h.Ie,h.Q$,h.q_,h.yW,b.uU,I.O]})}},4140:(J,A,a)=>{a.r(A),a.d(A,{BookingPageModule:()=>C});var g=a(6895),P=a(4006),i=a(603),p=a(9773),y=a(5861),e=a(7220),O=a(567),T=a(3077),r=a(4650),h=a(263),M=a(3746),x=a(5252),b=a(7903);const I=["superTabs"],v=["pendingListPage"],m=["approvedListPage"],d=["processedListPage"];function _(l,n){if(1&l){const t=r.EpF();r.TgZ(0,"ion-button",20),r.NdJ("click",function(){r.CHM(t);const s=r.oxw();return r.KtG(s.history())}),r._UZ(1,"ion-icon",21),r.qZA()}}function f(l,n){if(1&l){const t=r.EpF();r.TgZ(0,"ion-refresher",22),r.NdJ("ionRefresh",function(s){r.CHM(t);const c=r.oxw();return r.KtG(c.doRefreshPending(s))}),r._UZ(1,"ion-refresher-content"),r.qZA()}}function E(l,n){if(1&l){const t=r.EpF();r.TgZ(0,"ion-refresher",22),r.NdJ("ionRefresh",function(s){r.CHM(t);const c=r.oxw();return r.KtG(c.doRefreshApproved(s))}),r._UZ(1,"ion-refresher-content"),r.qZA()}}function k(l,n){if(1&l){const t=r.EpF();r.TgZ(0,"ion-refresher",22),r.NdJ("ionRefresh",function(s){r.CHM(t);const c=r.oxw();return r.KtG(c.doRefreshProcess(s))}),r._UZ(1,"ion-refresher-content"),r.qZA()}}class L{actionSheetController;modalCtrl;alertController;authService;router;route;storageService;cd;platform;selectedStatus=["Pending","Approved"];currentUser;isLoading=!1;reservationData=[];message="";refreshEvent;subscription;activeTabIndex=1;superTabs;pendingListPage;approvedListPage;processedListPage;constructor(n,t,o,s,c,u,Z,R,K){this.actionSheetController=n,this.modalCtrl=t,this.alertController=o,this.authService=s,this.router=c,this.route=u,this.storageService=Z,this.cd=R,this.platform=K,this.currentUser=this.storageService.getLoginUser()}get isAuthenticated(){const n=this.storageService.getLoginUser();return n&&n.customerId&&n.userId&&n.accessToken&&""!==n.customerId&&""!==n.userId&&""!==n.accessToken}ngOnInit(){}ngAfterViewInit(){var n=this;return(0,y.Z)(function*(){if(n.isAuthenticated)try{(0,O.D)([n.pendingListPage.getReservation(n.currentUser.customerId,"Pending"),n.approvedListPage.getReservation(n.currentUser.customerId,"Approved"),n.processedListPage.getReservation(n.currentUser.customerId,"Processed")]).toPromise()}catch{yield n.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}ionViewWillEnter(){var n=this;return(0,y.Z)(function*(){const t=n.route.snapshot.queryParamMap.get("status"),o=n.route.snapshot.queryParamMap.get("reservationId");if(t&&t.toLowerCase().includes("approved")){if(n.activeTabIndex=1,n.superTabs.selectTab(1),o&&"''"!==o){yield n.approvedListPage.getReservation(n.currentUser.customerId,"Approved");const s=n.approvedListPage.reservationData.filter(c=>c.reservationId===o)[0];s&&(yield n.approvedListPage.onOpenDetails(s))}}else if(t&&t.toLowerCase().includes("processed")){if(n.activeTabIndex=2,n.superTabs.selectTab(2),o&&"''"!==o){yield n.processedListPage.getReservation(n.currentUser.customerId,"Processed");const s=n.processedListPage.reservationData.filter(c=>c.reservationId===o)[0];yield n.processedListPage.onOpenDetails(s)}}else n.activeTabIndex=1,n.superTabs.selectTab(1);n.cd.detectChanges()})()}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{document.addEventListener("backbutton",n=>{n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()},!1)})}ionViewWillLeave(){this.subscription.unsubscribe()}segmentChanged(n){}onOpenAdd(){var n=this;return(0,y.Z)(function*(){n.activeTabIndex=0,n.superTabs.selectTab(0),n.cd.detectChanges();let t=null;t=yield n.modalCtrl.create({component:e.p,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!1,componentProps:{modal:t,isNew:!0,currentUser:n.currentUser,durationInHours:1}}),t.present();const{role:s}=yield t.onWillDismiss();"confirm"===s&&(yield n.pendingListPage.getReservation(n.currentUser.customerId,"Pending"))})()}doRefreshPending(n){var t=this;return(0,y.Z)(function*(){try{t.refreshEvent=n,yield t.pendingListPage.getReservation(t.currentUser.customerId,"Pending").finally(()=>{t.refreshEvent&&(t.refreshEvent.target.complete(),t.refreshEvent=null)})}catch{yield t.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}doRefreshApproved(n){var t=this;return(0,y.Z)(function*(){try{t.refreshEvent=n,yield t.approvedListPage.getReservation(t.currentUser.customerId,"Approved").finally(()=>{t.refreshEvent&&(t.refreshEvent.target.complete(),t.refreshEvent=null)})}catch{yield t.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}doRefreshProcess(n){var t=this;return(0,y.Z)(function*(){try{t.refreshEvent=n,yield t.processedListPage.getReservation(t.currentUser.customerId,"Processed").finally(()=>{t.refreshEvent&&(t.refreshEvent.target.complete(),t.refreshEvent=null)})}catch{yield t.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}tabChange(n){var t=this;return(0,y.Z)(function*(){t.activeTabIndex=n.detail.index,t.cd.detectChanges()})()}history(){var n=this;return(0,y.Z)(function*(){let t=null;t=yield n.modalCtrl.create({component:T.n,cssClass:"modal-fullscreen",componentProps:{currentUser:n.currentUser}}),t.present(),yield t.onWillDismiss()})()}presentAlert(n){var t=this;return(0,y.Z)(function*(){yield(yield t.alertController.create({})).present()})()}logout(){this.authService.logout()}isCurrentTab(n){}static \u0275fac=function(t){return new(t||L)(r.Y36(i.BX),r.Y36(i.IN),r.Y36(i.Br),r.Y36(h.e),r.Y36(p.F0),r.Y36(p.gz),r.Y36(M.V),r.Y36(r.sBO),r.Y36(i.t4))};static \u0275cmp=r.Xpm({type:L,selectors:[["app-booking"]],viewQuery:function(t,o){if(1&t&&(r.Gf(I,5),r.Gf(v,5),r.Gf(m,5),r.Gf(d,5)),2&t){let s;r.iGM(s=r.CRH())&&(o.superTabs=s.first),r.iGM(s=r.CRH())&&(o.pendingListPage=s.first),r.iGM(s=r.CRH())&&(o.approvedListPage=s.first),r.iGM(s=r.CRH())&&(o.processedListPage=s.first)}},decls:44,vars:11,consts:[["no-border","","no-shadow",""],["slot","start",2,"width","48px"],[2,"text-align","center"],["slot","end"],[3,"click",4,"ngIf"],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[3,"activeTabIndex","tabChange"],["superTabs",""],["slot","top","color","primary"],["pendingTabButton",""],["slot","start","color","success"],["approvedTabButton",""],["processedTabButton",""],[3,"status","canEdit"],["pendingListPage",""],[3,"status"],["approvedListPage",""],["processedListPage",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click"],[3,"click"],["slot","icon-only","name","time-outline"],["slot","fixed",1,"refresher-custom",3,"ionRefresh"]],template:function(t,o){if(1&t&&(r.TgZ(0,"ion-header",0)(1,"ion-toolbar"),r._UZ(2,"div",1),r.TgZ(3,"ion-title",2),r._uU(4,"Booking"),r.qZA(),r.TgZ(5,"ion-buttons",3),r.YNc(6,_,2,0,"ion-button",4),r.qZA()()(),r.TgZ(7,"ion-content"),r.YNc(8,f,2,0,"ion-refresher",5),r.YNc(9,E,2,0,"ion-refresher",5),r.YNc(10,k,2,0,"ion-refresher",5),r.TgZ(11,"super-tabs",6,7),r.NdJ("tabChange",function(c){return o.tabChange(c)}),r.TgZ(13,"super-tabs-toolbar",8)(14,"super-tab-button",null,9)(16,"ion-badge",10),r._uU(17,"1"),r.qZA(),r.TgZ(18,"ion-label"),r._uU(19,"Pending"),r.qZA()(),r.TgZ(20,"super-tab-button",null,11)(22,"ion-label"),r._uU(23,"Approved"),r.qZA()(),r.TgZ(24,"super-tab-button",null,12)(26,"ion-label"),r._uU(27,"Ongoing"),r.qZA()()(),r.TgZ(28,"super-tabs-container")(29,"super-tab")(30,"ion-content"),r._UZ(31,"app-booking-list-page",13,14),r.qZA()(),r.TgZ(33,"super-tab")(34,"ion-content"),r._UZ(35,"app-booking-list-page",15,16),r.qZA()(),r.TgZ(37,"super-tab")(38,"ion-content"),r._UZ(39,"app-booking-list-page",15,17),r.qZA()()()()(),r.TgZ(41,"div",18)(42,"ion-button",19),r.NdJ("click",function(){return o.isAuthenticated?o.onOpenAdd():o.logout()}),r._uU(43),r.qZA()()),2&t){const s=r.MAs(12);r.xp6(6),r.Q6J("ngIf",o.isAuthenticated),r.xp6(2),r.Q6J("ngIf",!o.isLoading&&0===s.activeTabIndex),r.xp6(1),r.Q6J("ngIf",!o.isLoading&&1===s.activeTabIndex),r.xp6(1),r.Q6J("ngIf",!o.isLoading&&2===s.activeTabIndex),r.xp6(1),r.Q6J("activeTabIndex",o.activeTabIndex),r.xp6(20),r.Q6J("status","Pending")("canEdit",!0),r.xp6(4),r.Q6J("status","Approved"),r.xp6(4),r.Q6J("status","Processed"),r.xp6(3),r.Q6J("disabled",o.isLoading),r.xp6(1),r.Oqu(o.isAuthenticated?"Book new Reservation":"Login to book reservation")}},dependencies:[g.O5,i.yp,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Q$,i.nJ,i.Wo,i.wd,i.sr,x.L0,x.p7,x.Ex,x.ti,x.Ry,b.p],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0!important}  .mat-tab-group{height:100%;display:flex}  .mat-tab-group .mat-tab-labels{justify-content:space-around}  .mat-tab-group .mat-tab-body-wrapper{display:flex;flex-grow:1;height:100%}.sched-controls-bottom[_ngcontent-%COMP%]{z-index:1000;position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}.list-title[_ngcontent-%COMP%]{margin:10px 25px!important;display:flex}[_nghost-%COMP%]{--super-tabs-toolbar-background: #fff;--st-indicator-color: var(--ion-color-tertiary);--st-base-color-active: var(--ion-color-tertiary);--st-base-color-inactive: var(--ion-color-dark-tint)!important}"]})}const D=[{path:"",component:L},{path:"booking-details",loadChildren:()=>a.e(9206).then(a.bind(a,9206)).then(l=>l.BookingDetailsPageModule)},{path:"add-booking",loadChildren:()=>a.e(7163).then(a.bind(a,7163)).then(l=>l.NewBookingPageModule)},{path:"booking-history",loadChildren:()=>a.e(8777).then(a.bind(a,8777)).then(l=>l.BookingHistoryPageModule)},{path:"booking-list-page",loadChildren:()=>Promise.resolve().then(a.bind(a,4831)).then(l=>l.BookingListPagePageModule)},{path:"booking-item-add",loadChildren:()=>a.e(4718).then(a.bind(a,4718)).then(l=>l.BookingItemAddPageModule)},{path:"booking-item-attachments",loadChildren:()=>a.e(7986).then(a.bind(a,7986)).then(l=>l.BookingItemAttachmentsPageModule)}];class U{static \u0275fac=function(t){return new(t||U)};static \u0275mod=r.oAB({type:U});static \u0275inj=r.cJS({imports:[p.Bz.forChild(D),p.Bz]})}var B=a(5457),S=a(5815),N=a(4831);class C{static \u0275fac=function(t){return new(t||C)};static \u0275mod=r.oAB({type:C});static \u0275inj=r.cJS({imports:[g.ez,P.u5,i.Pc,P.UX,U,B.q,S.d,x.IO,N.BookingListPagePageModule]})}},7220:(J,A,a)=>{a.d(A,{p:()=>C});var g=a(5861),P=a(4006),i=a(603),p=a(567),y=a(8164),e=a(4650),O=a(2669),T=a(7956),r=a(9709),h=a(1481),M=a(6895),x=a(6257),b=a(9549),I=a(4144),v=a(5641);const m=["reservationStepper"];function d(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-fab",29)(1,"ion-fab-button",1),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onAddItem())}),e._UZ(2,"ion-icon",30),e.qZA()()}}function _(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-card",33),e.NdJ("click",function(){const s=e.CHM(t),c=s.index,u=s.$implicit,Z=e.oxw(2);return e.KtG(Z.onEditItem(c,u))}),e.TgZ(1,"ion-card-header")(2,"ion-list",23)(3,"ion-item",34)(4,"ion-label")(5,"h3"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-icon",35),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.onRemoveItem(c))}),e.qZA()()()(),e.TgZ(8,"ion-card-content")(9,"h3"),e._uU(10),e.qZA()()()}if(2&l){const t=n.$implicit;e.xp6(6),e.AsE("x",t.quantity,"\xa0-\xa0",t.orderItemType.name,""),e.xp6(4),e.Oqu(t.remarks)}}function f(l,n){if(1&l&&(e.TgZ(0,"div",31),e.YNc(1,_,11,3,"ion-card",32),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.orderItems)}}function E(l,n){1&l&&(e.TgZ(0,"div",36),e._UZ(1,"ion-icon",37),e.TgZ(2,"h3"),e._uU(3,"No items added yet"),e.qZA()())}function k(l,n){if(1&l&&e._UZ(0,"ion-datetime",38,39),2&l){const t=e.oxw();e.Q6J("min",t.minDate)("showDefaultButtons",!0)}}function L(l,n){if(1&l&&(e.TgZ(0,"ion-select-option",40),e._uU(1),e.qZA()),2&l){const t=n.$implicit;e.Q6J("value",t.reservationLevelId),e.xp6(1),e.Oqu(t.name)}}function D(l,n){1&l&&(e.TgZ(0,"ion-select-option",41),e._uU(1,"No options available"),e.qZA())}function U(l,n){1&l&&(e.TgZ(0,"span",42),e._uU(1," No selected option "),e.qZA())}function B(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-button",43),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(11);return e.KtG(s.next())}),e._uU(1,"Next"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("disabled",t.isLoading||0===t.orderItems.length)}}function S(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-button",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e._uU(1,"Save"),e.qZA()}if(2&l){const t=e.oxw(),o=e.MAs(45);e.Q6J("disabled",t.isLoading||!t.reservationForm.valid||!o.checked)}}function N(l,n){if(1&l){const t=e.EpF();e.TgZ(0,"ion-button",44),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onBack())}),e._uU(1,"Back"),e.qZA()}}class C{modalCtrl;formBuilder;alertController;reservationService;actionSheetController;pageLoaderService;appconfig;platform;sanitizer;reservationStepper;timeSlotModal;isNew=!1;modal;currentUser;name;details={};itemForm;reservationForm;descriptionForm;isSubmitting=!1;isLoading=!1;isLoadingFilter=!1;error;subscription;allowToClose=!1;availableTimeSlot=[];orderItems=[];reservationLevelOptions=[];timeSlotConfig={start:"08:00",end:"17:00",notAvailableHours:["12:00"],durationInHours:1,dayOfWeekNotAvailable:["Sunday","Wednesday","Saturday"]};currentDate=new Date;minDate=new Date((new Date).setDate(this.currentDate.getDate())).toISOString();constructor(n,t,o,s,c,u,Z,R,K){this.modalCtrl=n,this.formBuilder=t,this.alertController=o,this.reservationService=s,this.actionSheetController=c,this.pageLoaderService=u,this.appconfig=Z,this.platform=R,this.sanitizer=K,this.timeSlotConfig.notAvailableHours=this.appconfig.config.reservationConfig.timeSlotNotAvailableHours,this.timeSlotConfig.dayOfWeekNotAvailable=this.appconfig.config.reservationConfig.dayOfWeekNotAvailable,this.platform.backButton.subscribeWithPriority(-1,()=>{this.cancel()}),this.initFilter()}get formData(){return{...this.reservationForm.value,customerId:this.currentUser.customerId,orderItems:this.orderItems.map(n=>({orderItemTypeId:n.orderItemType.orderItemTypeId,remarks:n.remarks,quantity:n.quantity,orderItemAttachments:n.orderItemAttachments}))}}get errorControls(){return this.reservationForm.controls}initFilter(){this.isLoadingFilter=!0,(0,p.D)([]).subscribe(([])=>{},n=>console.error(n),()=>{this.isLoadingFilter=!1,this.reservationLevelOptions=this.appconfig.config.lookup.reservationLevel.map(n=>({reservationLevelId:n.reservationLevelId,name:n.name}))})}ngOnInit(){this.itemForm=this.formBuilder.group({}),this.reservationForm=this.formBuilder.group({reqCompletionDate:[this.minDate,P.kI.required],reservationLevelId:[null,P.kI.required],description:[null,P.kI.required]}),this.allowToClose=!0,this.subscription=this.platform.backButton.subscribeWithPriority(9999,n=>{this.modal.canDismiss&&this.cancel(),this.pageLoaderService.close()})}ionViewWillLeave(){this.subscription.unsubscribe()}onSelectFocus(n,t){console.log("click"),setTimeout(()=>{n.setValue(t)},1e3)}onBack(){this.reservationStepper.previous()}cancel(){0!==this.reservationStepper.selectedIndex?this.onBack():(this.modal.canDismiss=!0,this.modalCtrl.dismiss(null,"cancel"))}save(){var n=this;return(0,g.Z)(function*(){const t=n.formData;try{yield n.pageLoaderService.open("Booking reservation..."),n.isSubmitting=!0,n.reservationService.createReservation(t).subscribe(function(){var o=(0,g.Z)(function*(s){s.success?(yield n.presentAlert({header:"Booked!",buttons:["OK"]}),n.isSubmitting=!1,n.modal.canDismiss=!0,n.modal.dismiss({success:!0,data:s.data},"confirm"),yield n.pageLoaderService.close()):(yield n.pageLoaderService.close(),n.isSubmitting=!1,yield n.presentAlert({header:"Try again!",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]}))});return function(s){return o.apply(this,arguments)}}(),function(){var o=(0,g.Z)(function*(s){yield n.pageLoaderService.close(),n.isSubmitting=!1,yield n.presentAlert({header:"Try again!",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})});return function(s){return o.apply(this,arguments)}}())}catch(o){yield n.pageLoaderService.close(),n.isSubmitting=!1,yield n.presentAlert({header:"Try again!",message:Array.isArray(o.message)?o.message[0]:o.message,buttons:["OK"]})}})()}onAddItem(){var n=this;return(0,g.Z)(function*(){const t=yield n.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{canEdit:!0,currentUser:n.currentUser}});t.present(),yield t.onWillDismiss().then(function(){var o=(0,g.Z)(function*(s){s.data&&n.orderItems.push(s.data.data)});return function(s){return o.apply(this,arguments)}}())})()}onEditItem(n,t){var o=this;return(0,g.Z)(function*(){const s=yield o.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{details:t,canEdit:!0,currentUser:o.currentUser}});s.present(),yield s.onWillDismiss().then(function(){var c=(0,g.Z)(function*(u){u.data&&(o.orderItems[n]=u.data.data)});return function(u){return c.apply(this,arguments)}}())})()}onRemoveItem(n){var t=this;return(0,g.Z)(function*(){t.orderItems=t.orderItems.filter(o=>o.orderItemId!==n.orderItemId)})()}presentAlert(n){var t=this;return(0,g.Z)(function*(){yield(yield t.alertController.create(n)).present()})()}static \u0275fac=function(t){return new(t||C)(e.Y36(i.IN),e.Y36(P.qu),e.Y36(i.Br),e.Y36(O.D),e.Y36(i.BX),e.Y36(T.p),e.Y36(r._),e.Y36(i.t4),e.Y36(h.H7))};static \u0275cmp=e.Xpm({type:C,selectors:[["app-new-booking"]],viewQuery:function(t,o){if(1&t&&(e.Gf(m,5),e.Gf(i.ki,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.reservationStepper=s.first),e.iGM(s=e.CRH())&&(o.timeSlotModal=s.first)}},decls:52,vars:20,consts:[["slot","start"],[3,"click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],[1,"ion-padding"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],["animationDuration","200",3,"linear"],["reservationStepper",""],[3,"stepControl"],["class","item-list",4,"ngIf","ngIfElse"],["noItemAdded",""],["id","reservationForm",3,"formGroup","ngSubmit"],[1,"form-field-group"],["id","open-reqCompletionDate-date-picker","fill","outline","lines","none",3,"disabled"],["trigger","open-reqCompletionDate-date-picker",3,"cssClass"],["fill","outline",3,"disabled"],["slot","start","formControlName","reservationLevelId","placeholder","Select from options"],["slot","start",3,"value",4,"ngFor","ngForOf"],["classs","no-result-option","disabled","","slot","start",4,"ngIf"],["class","error",4,"ngIf"],["appearance","outline"],["matInput","","type","text","placeholder","Description","formControlName","description",2,"height","200px"],["lines","none"],["mode","ios","slot","start"],["termsAndConditionCheck",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click",4,"ngIf"],["color","primary","size","large","expand","block","fill","outline",3,"click",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],["name","add"],[1,"item-list"],["mode","ios",3,"click",4,"ngFor","ngForOf"],["mode","ios",3,"click"],[1,"ion-no-padding"],["name","trash-outline",3,"click"],[1,"list-none"],["name","document-text-outline"],["presentation","date","size","cover","formControlName","reqCompletionDate",3,"min","showDefaultButtons"],["reqCompletionDateCtrl",""],["slot","start",3,"value"],["classs","no-result-option","disabled","","slot","start"],[1,"error"],["color","primary","size","large","expand","block",3,"disabled","click"],["color","primary","size","large","expand","block","fill","outline",3,"click"]],template:function(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return o.cancel()}),e._UZ(4,"ion-icon",2),e.qZA()(),e.TgZ(5,"ion-title",3),e._uU(6,"New Reservation"),e.qZA(),e._UZ(7,"div",4),e.qZA()(),e.TgZ(8,"ion-content",5),e.YNc(9,d,3,0,"ion-fab",6),e.TgZ(10,"mat-stepper",7,8)(12,"mat-step",9)(13,"h3"),e._uU(14,"What items to book?"),e.qZA(),e.YNc(15,f,2,1,"div",10),e.YNc(16,E,4,0,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(18,"mat-step",9)(19,"form",12),e.NdJ("ngSubmit",function(){e.CHM(s);const u=e.MAs(11);return e.KtG(!!o.reservationForm.valid&&u.next())}),e.TgZ(20,"fieldset")(21,"div",13)(22,"mat-label",0),e._uU(23,"Select required completion date"),e.qZA(),e.TgZ(24,"ion-item",14)(25,"ion-label"),e._uU(26),e.ALo(27,"date"),e.qZA()(),e.TgZ(28,"ion-modal",15),e.YNc(29,k,2,2,"ng-template"),e.qZA()(),e.TgZ(30,"div",13)(31,"mat-label",0),e._uU(32,"Important"),e.qZA(),e.TgZ(33,"ion-item",16)(34,"ion-select",17),e.YNc(35,L,2,2,"ion-select-option",18),e.YNc(36,D,2,0,"ion-select-option",19),e.qZA()(),e.YNc(37,U,2,0,"span",20),e.qZA(),e.TgZ(38,"div",13)(39,"mat-form-field",21)(40,"mat-label"),e._uU(41,"Description"),e.qZA(),e._UZ(42,"textarea",22),e.qZA()(),e.TgZ(43,"ion-item",23),e._UZ(44,"ion-checkbox",24,25),e.TgZ(46,"ion-label"),e._uU(47,"I agree to the terms and conditions"),e.qZA()()()()()()(),e.TgZ(48,"div",26),e.YNc(49,B,2,1,"ion-button",27),e.YNc(50,S,2,1,"ion-button",27),e.YNc(51,N,2,0,"ion-button",28),e.qZA()}if(2&t){const s=e.MAs(11),c=e.MAs(17);e.xp6(9),e.Q6J("ngIf",0===s.selectedIndex),e.xp6(1),e.Q6J("linear",!1),e.xp6(2),e.Q6J("stepControl",o.reservationForm),e.xp6(3),e.Q6J("ngIf",o.orderItems.length>0)("ngIfElse",c),e.xp6(3),e.Q6J("stepControl",o.reservationForm),e.xp6(1),e.Q6J("formGroup",o.reservationForm),e.xp6(5),e.Q6J("disabled",o.isLoading),e.xp6(2),e.Oqu(e.xi3(27,17,o.formData.reqCompletionDate,"EEEE, MMMM d, y")),e.xp6(2),e.Q6J("cssClass","bottom-end"),e.xp6(5),e.Q6J("disabled",o.isLoading),e.xp6(2),e.Q6J("ngForOf",o.reservationLevelOptions),e.xp6(1),e.Q6J("ngIf",0===o.reservationLevelOptions.length),e.xp6(1),e.Q6J("ngIf",o.errorControls.reservationLevelId.touched&&o.errorControls.reservationLevelId.errors&&o.errorControls.reservationLevelId.errors.required),e.xp6(12),e.Q6J("ngIf",0===s.selectedIndex),e.xp6(1),e.Q6J("ngIf",1===s.selectedIndex),e.xp6(1),e.Q6J("ngIf",s.selectedIndex>0&&s.selectedIndex<=1)}},dependencies:[M.sg,M.O5,P._Y,P.Fj,P.JJ,P.JL,P.sg,P.u,i.YG,i.Sm,i.PM,i.FN,i.Zi,i.nz,i.W2,i.x4,i.IJ,i.W4,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.t9,i.n0,i.wd,i.sr,i.ki,i.w,i.QI,x.C0,x.Vq,b.KE,b.hX,I.Nt,v.f,M.uU],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0!important}.sched-controls-bottom[_ngcontent-%COMP%]{position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}  mat-stepper .mat-horizontal-stepper-header-container{display:none!important}  mat-stepper .mat-horizontal-content-container{padding:0!important}ion-radio-group.hide-radio-controls[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{visibility:hidden!important}.photos[_ngcontent-%COMP%]{row-gap:10px;display:flex;flex-direction:column;box-sizing:border-box;width:100%;padding:10px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:auto}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{position:absolute;right:30px;width:40px;height:40px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:10px;object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75}.item-list[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.item-list[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px!important}.add-item-button[_ngcontent-%COMP%]{position:fixed;bottom:90px;right:20px;box-sizing:border-box;display:flex;height:80px;width:80px;align-items:center}.add-item-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 50%;height:100%;width:100%;margin:0!important}.list-none[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;flex-grow:1;justify-content:center;align-items:center;margin-top:50%}.list-none[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}ion-checkbox[_ngcontent-%COMP%]{margin-right:10px!important}"]})}}}]);