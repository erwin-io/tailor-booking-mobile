"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4140],{3077:(J,T,a)=>{a.d(T,{n:()=>E});var d=a(655),f=a(8305),o=a(5e3),u=a(8779),P=a(2669),e=a(9808),I=a(8559);function O(m,y){if(1&m){const _=o.EpF();o.TgZ(0,"ion-refresher",10),o.NdJ("ionRefresh",function(C){o.CHM(_);const A=o.oxw();return o.KtG(A.doRefresh(C))}),o._UZ(1,"ion-refresher-content"),o.qZA()}}function n(m,y){if(1&m){const _=o.EpF();o.TgZ(0,"ion-item",12),o.NdJ("click",function(){const A=o.CHM(_).$implicit,Z=o.oxw(3);return o.KtG(Z.onOpenDetails(A))}),o.TgZ(1,"ion-label")(2,"div")(3,"h3")(4,"strong"),o._uU(5),o.ALo(6,"numberLeadZero"),o.TgZ(7,"ion-text",13),o._uU(8),o.qZA()()()()()()}if(2&m){const _=y.$implicit;let g;o.xp6(5),o.hij("ID #: ",o.xi3(6,3,_.reservationId,5)," "),o.xp6(2),o.Q6J("color",("1"===_.reservationStatus.reservationStatusId||"4"===_.reservationStatus.reservationStatusId?"danger":"")||("2"===_.reservationStatus.reservationStatusId?"primary":"")||(null!==(g="3"===_.reservationStatus.reservationStatusId)&&void 0!==g?g:"tertiary")),o.xp6(1),o.hij(" ",_.reservationStatus.name," ")}}function v(m,y){if(1&m&&(o.TgZ(0,"ion-list"),o.YNc(1,n,9,6,"ion-item",11),o.qZA()),2&m){const _=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",_.reservation)}}function p(m,y){if(1&m&&(o.TgZ(0,"div"),o.YNc(1,v,2,1,"ion-list",7),o.qZA()),2&m){const _=o.oxw(),g=o.MAs(14);o.xp6(1),o.Q6J("ngIf",_.reservation.length>0)("ngIfElse",g)}}function x(m,y){1&m&&(o.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"div")(4,"h3",14),o._UZ(5,"ion-skeleton-text",15),o.qZA(),o.TgZ(6,"p"),o._UZ(7,"ion-skeleton-text",15),o.qZA(),o.TgZ(8,"p",16),o._UZ(9,"ion-skeleton-text",15),o.qZA()()()()()),2&m&&(o.xp6(5),o.Q6J("animated",!0),o.xp6(2),o.Q6J("animated",!0),o.xp6(2),o.Q6J("animated",!0))}function b(m,y){1&m&&(o.TgZ(0,"div",17),o._UZ(1,"ion-icon",18),o.TgZ(2,"h3",19),o._uU(3,"No recent reservations to show"),o.qZA()())}let E=(()=>{class m{constructor(_,g,C,A){this.actionSheetController=_,this.modalCtrl=g,this.alertController=C,this.reservationService=A,this.isLoading=!1,this.reservation=[],this.message="",this.currentPage=1,this.limit=10,this.totalUnreadNotification=0}ngOnInit(){this.initHistory(this.currentUser.customerId)}initHistory(_){return(0,d.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.reservationService.getByStatus({customerId:_,reservationStatus:"Completed,Cancelled"}).subscribe(g=>(0,d.mG)(this,void 0,void 0,function*(){g.success?(this.reservation=g.data,this.refreshEvent&&(this.refreshEvent.target.complete(),this.refreshEvent=null),this.isLoading=!1):yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]})}),g=>(0,d.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]}),this.isLoading=!1}))}catch(g){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(g.message)?g.message[0]:g.message,buttons:["OK"]})}})}onOpenDetails(_){return(0,d.mG)(this,void 0,void 0,function*(){const g=yield this.modalCtrl.create({component:f.O,cssClass:"modal-fullscreen",componentProps:{details:_,currentUser:this.currentUser}});g.present(),yield g.onWillDismiss()})}loadMore(){return(0,d.mG)(this,void 0,void 0,function*(){this.currentPage=this.currentPage+1,this.initHistory(this.currentUser.customerId)})}doRefresh(_){return(0,d.mG)(this,void 0,void 0,function*(){this.reservation=[],this.currentPage=1,this.refreshEvent=_,this.initHistory(this.currentUser.customerId)})}cancel(){return this.modalCtrl.dismiss(null,"cancel")}presentAlert(_){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(_)).present()})}}return m.\u0275fac=function(_){return new(_||m)(o.Y36(u.BX),o.Y36(u.IN),o.Y36(u.Br),o.Y36(P.D))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-booking-history"]],decls:15,vars:4,consts:[["no-border","","no-shadow",""],["slot","start"],[3,"disabled","click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseLoading",""],["elseNoData",""],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",3,"click"],[3,"color"],[1,"title",2,"width","50%"],[3,"animated"],[2,"width","40%"],[1,"no-records"],["name","search-outline",2,"font-size","4em"],[1,"text"]],template:function(_,g){if(1&_&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),o.NdJ("click",function(){return g.cancel()}),o._UZ(4,"ion-icon",3),o.qZA()(),o.TgZ(5,"ion-title",4),o._uU(6,"History"),o.qZA(),o._UZ(7,"div",5),o.qZA()(),o.TgZ(8,"ion-content"),o.YNc(9,O,2,0,"ion-refresher",6),o.YNc(10,p,2,2,"div",7),o.YNc(11,x,10,3,"ng-template",null,8,o.W1O),o.YNc(13,b,4,0,"ng-template",null,9,o.W1O),o.qZA()),2&_){const C=o.MAs(12);o.xp6(3),o.Q6J("disabled",g.isLoading),o.xp6(6),o.Q6J("ngIf",!g.isLoading),o.xp6(1),o.Q6J("ngIf",!g.isLoading)("ngIfElse",C)}},dependencies:[e.sg,e.O5,u.YG,u.Sm,u.W2,u.Gu,u.gu,u.Ie,u.Q$,u.q_,u.nJ,u.Wo,u.CK,u.yW,u.wd,u.sr,I.O],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}ion-item[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-label[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.no-records[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px}  ion-item .un-read .title{font-weight:800px!important}"]}),m})()},4831:(J,T,a)=>{a.r(T),a.d(T,{BookingListPagePageModule:()=>v});var d=a(9808),f=a(3075),o=a(8779),u=a(4132),P=a(7903),e=a(5e3);const I=[{path:"",component:P.p}];let O=(()=>{class p{}return p.\u0275fac=function(b){return new(b||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[u.Bz.forChild(I),u.Bz]}),p})();var n=a(5815);let v=(()=>{class p{}return p.\u0275fac=function(b){return new(b||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[d.ez,f.u5,o.Pc,O,n.d]}),p})()},7903:(J,T,a)=>{a.d(T,{p:()=>N});var d=a(655),f=a(8349),o=a(5671),u=a(8305),P=a(8164),e=a(5e3),I=a(2669),O=a(3746),n=a(8791),v=a(8779),p=a(4132),x=a(7956),b=a(9808),E=a(8559);function m(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-icon",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw().$implicit,h=e.oxw(3);return e.KtG(c.orderItems.length>1?h.onRemoveItem(r):h.cancelReservation(c.reservationId))}),e.qZA()}}function y(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-list",17)(1,"ion-item",18)(2,"ion-label",10),e.NdJ("click",function(){const c=e.CHM(t).$implicit,h=e.oxw().$implicit,M=e.oxw(3);return e.KtG(M.onOpenItemDetails(h,c))}),e.TgZ(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"div",19)(6,"h2",20),e._uU(7),e.qZA()()(),e.YNc(8,m,1,0,"ion-icon",21),e.qZA()()}if(2&s){const t=l.$implicit,i=e.oxw().$implicit,r=e.oxw(3);e.Q6J("lines",i.orderItems.length>1?"":"none"),e.xp6(4),e.AsE("x",t.quantity,"\xa0-\xa0",t.orderItemType.name,""),e.xp6(3),e.Oqu(t.remarks),e.xp6(1),e.Q6J("ngIf",r.canEdit)}}function _(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-list",8)(1,"ion-item",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.onAddItem(r))}),e._UZ(2,"ion-icon",24),e.TgZ(3,"ion-label")(4,"h3"),e._uU(5,"Add more item"),e.qZA()()()()}}function g(s,l){if(1&s&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Required completion date: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&s){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,t.reqCompletionDate,"MMMM dd, yyyy"))}}function C(s,l){if(1&s&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Estimated completion date: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&s){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,t.estCompletionDate,"MMMM dd, yyyy"))}}function A(s,l){if(1&s&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Assigned person: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.qZA()()()),2&s){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.staff.name+" "+t.staff.name)}}function Z(s,l){if(1&s&&(e.TgZ(0,"h3")(1,"ion-text",25),e._uU(2),e.qZA()()),2&s){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.reservationLevel.name)}}function G(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-list",8)(1,"ion-item",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(3);return e.KtG(c.cancelReservation(r.reservationId))}),e._UZ(2,"ion-icon",26),e.TgZ(3,"ion-label")(4,"h3")(5,"ion-text",27),e._uU(6,"Cancel"),e.qZA()()()()()}}function L(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-card",7)(1,"ion-card-header")(2,"ion-list",8)(3,"ion-item",9)(4,"ion-label")(5,"h2",10),e.NdJ("click",function(){const c=e.CHM(t).$implicit,h=e.oxw(3);return e.KtG(h.onOpenDetails(c))}),e._uU(6),e.ALo(7,"numberLeadZero"),e.qZA()(),e.TgZ(8,"ion-badge",11),e._uU(9),e.qZA()()()(),e.TgZ(10,"ion-card-content"),e.YNc(11,y,9,5,"ion-list",12),e.YNc(12,_,6,0,"ion-list",13),e.qZA(),e.TgZ(13,"div",14)(14,"div",15),e.NdJ("click",function(){const c=e.CHM(t).$implicit,h=e.oxw(3);return e.KtG(h.onOpenDetails(c))}),e.YNc(15,g,7,4,"div",16),e.YNc(16,C,7,4,"div",16),e.YNc(17,A,6,1,"div",16),e.YNc(18,Z,3,1,"h3",16),e.qZA(),e.YNc(19,G,7,0,"ion-list",13),e.qZA()()}if(2&s){const t=l.$implicit,i=e.oxw(3);e.xp6(6),e.hij("#",e.xi3(7,10,t.reservationId,5),""),e.xp6(2),e.Q6J("color",i.status.toLowerCase().includes("approved")?"success":i.status.toLowerCase().includes("pending")?"warning":"secondary"),e.xp6(1),e.Oqu(i.status),e.xp6(2),e.Q6J("ngForOf",t.orderItems),e.xp6(1),e.Q6J("ngIf",i.canEdit),e.xp6(3),e.Q6J("ngIf","1"===t.reservationStatus.reservationStatusId||"2"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf","3"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf","3"===t.reservationStatus.reservationStatusId&&t.staff&&t.staff.name),e.xp6(1),e.Q6J("ngIf","1"===t.reservationStatus.reservationStatusId||"2"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf",i.canEdit)}}function k(s,l){if(1&s&&(e.TgZ(0,"div",5),e.YNc(1,L,20,13,"ion-card",6),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.reservationData)}}function B(s,l){if(1&s&&(e.TgZ(0,"div",28),e._UZ(1,"ion-icon",29),e.TgZ(2,"h3"),e._uU(3),e.qZA()()),2&s){const t=e.oxw(2);e.xp6(3),e.hij("No ",t.status.toLowerCase()," records yet")}}function U(s,l){if(1&s&&(e.TgZ(0,"div",2),e.YNc(1,k,2,1,"div",3),e.YNc(2,B,4,1,"ng-template",null,4,e.W1O),e.qZA()),2&s){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.reservationData.length>0)("ngIfElse",t)}}function D(s,l){1&s&&(e.TgZ(0,"div",2)(1,"div",5)(2,"ion-card",7),e._UZ(3,"ion-card-content"),e.qZA()()())}let N=(()=>{class s{constructor(t,i,r,c,h,M,S,R){this.reservationService=t,this.storageService=i,this.orderItemService=r,this.alertController=c,this.modalCtrl=h,this.router=M,this.pageLoaderService=S,this.actionSheetController=R,this.status="",this.canEdit=!1,this.isLoading=!1,this.reservationData=[],this.currentUser=this.storageService.getLoginUser(),console.log(this.status)}get isAuthenticated(){const t=this.storageService.getLoginUser();return t&&t.customerId&&t.userId&&t.accessToken&&""!==t.customerId&&""!==t.userId&&""!==t.accessToken}ngOnInit(){}getReservation(t,i){return(0,d.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.reservationService.getByStatus({customerId:t,reservationStatus:i}).subscribe(r=>(0,d.mG)(this,void 0,void 0,function*(){r.success?(this.reservationData=r.data.map(c=>(c.orderItems=c.orderItems.filter(h=>h.entityStatus.entityStatusId===f.n.ACTIVE.toString()),c)),console.log(r.data),this.isLoading=!1):yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(r.message)?r.message[0]:r.message,buttons:["OK"]})}),r=>(0,d.mG)(this,void 0,void 0,function*(){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(r.message)?r.message[0]:r.message,buttons:["OK"]}),this.isLoading=!1}))}catch(r){yield this.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(r.message)?r.message[0]:r.message,buttons:["OK"]})}})}showMenu(t){return(0,d.mG)(this,void 0,void 0,function*(){const i=yield this.actionSheetController.create({cssClass:"sched-card-action-sheet",buttons:[{text:"Details",handler:()=>(0,d.mG)(this,void 0,void 0,function*(){this.onOpenDetails(t),i.dismiss()})},{text:"Back",handler:()=>(0,d.mG)(this,void 0,void 0,function*(){i.dismiss()})}]});yield i.present(),yield i.onDidDismiss()})}onOpenDetails(t){return(0,d.mG)(this,void 0,void 0,function*(){const i=yield this.modalCtrl.create({component:u.O,cssClass:"modal-fullscreen",componentProps:{details:t,currentUser:this.currentUser}});i.present(),yield i.onWillDismiss().then(r=>(0,d.mG)(this,void 0,void 0,function*(){this.router.navigate(["/booking"],{replaceUrl:!0})}))})}onAddItem(t){return(0,d.mG)(this,void 0,void 0,function*(){const i=yield this.modalCtrl.create({component:P.Q,cssClass:"modal-fullscreen",componentProps:{reservation:t,canEdit:!0,currentUser:this.currentUser}});i.present(),yield i.onWillDismiss().then(r=>(0,d.mG)(this,void 0,void 0,function*(){r.data&&(yield this.getReservation(this.currentUser.customerId,this.status))}))})}onOpenItemDetails(t,i){return(0,d.mG)(this,void 0,void 0,function*(){const r=yield this.modalCtrl.create({component:P.Q,cssClass:"modal-fullscreen",componentProps:{details:i,reservation:t,canEdit:this.canEdit,currentUser:this.currentUser}});r.present();const{role:h}=yield r.onWillDismiss();"confirm"===h&&(yield this.getReservation(this.currentUser.customerId,this.status))})}onRemoveItem(t){return(0,d.mG)(this,void 0,void 0,function*(){try{yield this.presentAlert({header:"Are you sure you want to remove this item?",buttons:[{text:"CANCEL",role:"cancel"},{text:"YES Continue",role:"confirm",handler:()=>(0,d.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.open("Processing please wait..."),this.isLoading=!0,this.orderItemService.delete(t.orderItemId).subscribe(i=>(0,d.mG)(this,void 0,void 0,function*(){i.success?(yield this.pageLoaderService.close(),yield this.presentAlert({header:"Item deleted!",buttons:["OK"]}),this.isLoading=!1,yield this.pageLoaderService.close(),yield this.getReservation(this.currentUser.customerId,this.status)):(yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]}))}),i=>(0,d.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})}))})}]})}catch(i){yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})}})}cancelReservation(t){return(0,d.mG)(this,void 0,void 0,function*(){try{yield this.presentAlert({header:"Are you sure you want to cancel reservation?",buttons:[{text:"CANCEL",role:"cancel"},{text:"YES Continue",role:"confirm",handler:()=>(0,d.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.open("Processing please wait..."),this.isLoading=!0,this.reservationService.updateReservationStatus({reservationId:t,reservationStatusId:o.C.CANCELLED}).subscribe(i=>(0,d.mG)(this,void 0,void 0,function*(){i.success?(yield this.pageLoaderService.close(),yield this.presentAlert({header:"Reservation cancelled!",buttons:["OK"]}),this.isLoading=!1,yield this.getReservation(this.currentUser.customerId,this.status)):(yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]}))}),i=>(0,d.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})}))})}]})}catch(i){yield this.pageLoaderService.close(),this.isLoading=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})}})}presentAlert(t){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(t)).present()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(I.D),e.Y36(O.V),e.Y36(n.R),e.Y36(v.Br),e.Y36(v.IN),e.Y36(p.F0),e.Y36(x.p),e.Y36(v.BX))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-booking-list-page"]],inputs:{status:"status",canEdit:"canEdit"},decls:3,vars:2,consts:[["class","booking-list",4,"ngIf","ngIfElse"],["elseLoading",""],[1,"booking-list"],["class","list-data",4,"ngIf","ngIfElse"],["elseNoData",""],[1,"list-data"],["mode","ios",4,"ngFor","ngForOf"],["mode","ios"],["lines","none"],[1,"ion-no-padding"],[3,"click"],["slot","end",2,"color","#fff",3,"color"],[3,"lines",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[1,"action"],[2,"display","flex","flex-direction","column","width","100%",3,"click"],[4,"ngIf"],[3,"lines"],["button","","detail","false",1,"ion-no-padding"],[1,"attribute"],[1,"remarks"],["name","trash-outline",3,"click",4,"ngIf"],["name","trash-outline",3,"click"],["button","","detail","false",1,"ion-no-padding",3,"click"],["name","add-outline"],["color","warning"],["name","close-outline","color","danger"],["color","danger"],[1,"list-none"],["name","document-text-outline"]],template:function(t,i){if(1&t&&(e.YNc(0,U,4,2,"div",0),e.YNc(1,D,4,0,"ng-template",null,1,e.W1O)),2&t){const r=e.MAs(2);e.Q6J("ngIf",!i.isLoading)("ngIfElse",r)}},dependencies:[b.sg,b.O5,v.yp,v.PM,v.FN,v.Zi,v.gu,v.Ie,v.Q$,v.q_,v.yW,b.uU,E.O]}),s})()},4140:(J,T,a)=>{a.r(T),a.d(T,{BookingPageModule:()=>N});var d=a(9808),f=a(3075),o=a(8779),u=a(4132),P=a(655),e=a(7220),I=a(567),O=a(3077),n=a(5e3),v=a(263),p=a(3746),x=a(5252),b=a(7903);const E=["superTabs"],m=["pendingListPage"],y=["approvedListPage"],_=["processedListPage"];function g(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"ion-button",20),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.history())}),n._UZ(1,"ion-icon",21),n.qZA()}}function C(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"ion-refresher",22),n.NdJ("ionRefresh",function(r){n.CHM(t);const c=n.oxw();return n.KtG(c.doRefreshPending(r))}),n._UZ(1,"ion-refresher-content"),n.qZA()}}function A(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"ion-refresher",22),n.NdJ("ionRefresh",function(r){n.CHM(t);const c=n.oxw();return n.KtG(c.doRefreshApproved(r))}),n._UZ(1,"ion-refresher-content"),n.qZA()}}function Z(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"ion-refresher",22),n.NdJ("ionRefresh",function(r){n.CHM(t);const c=n.oxw();return n.KtG(c.doRefreshProcess(r))}),n._UZ(1,"ion-refresher-content"),n.qZA()}}const L=[{path:"",component:(()=>{class s{constructor(t,i,r,c,h,M,S,R,K){this.actionSheetController=t,this.modalCtrl=i,this.alertController=r,this.authService=c,this.router=h,this.route=M,this.storageService=S,this.cd=R,this.platform=K,this.selectedStatus=["Pending","Approved"],this.isLoading=!1,this.reservationData=[],this.message="",this.activeTabIndex=1,this.currentUser=this.storageService.getLoginUser()}get isAuthenticated(){const t=this.storageService.getLoginUser();return t&&t.customerId&&t.userId&&t.accessToken&&""!==t.customerId&&""!==t.userId&&""!==t.accessToken}ngOnInit(){}ngAfterViewInit(){return(0,P.mG)(this,void 0,void 0,function*(){if(this.isAuthenticated)try{(0,I.D)([this.pendingListPage.getReservation(this.currentUser.customerId,"Pending"),this.approvedListPage.getReservation(this.currentUser.customerId,"Approved"),this.processedListPage.getReservation(this.currentUser.customerId,"Processed")]).toPromise()}catch(t){yield this.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})}ionViewWillEnter(){return(0,P.mG)(this,void 0,void 0,function*(){console.log("visited");const t=this.route.snapshot.queryParamMap.get("status"),i=this.route.snapshot.queryParamMap.get("reservationId");if(t&&t.toLowerCase().includes("approved")){if(this.activeTabIndex=1,this.superTabs.selectTab(1),i&&"''"!==i){yield this.approvedListPage.getReservation(this.currentUser.customerId,"Approved");const r=this.approvedListPage.reservationData.filter(c=>c.reservationId===i)[0];r&&(yield this.approvedListPage.onOpenDetails(r))}}else if(t&&t.toLowerCase().includes("processed")){if(this.activeTabIndex=2,this.superTabs.selectTab(2),i&&"''"!==i){yield this.processedListPage.getReservation(this.currentUser.customerId,"Processed");const r=this.processedListPage.reservationData.filter(c=>c.reservationId===i)[0];yield this.processedListPage.onOpenDetails(r)}}else this.activeTabIndex=1,this.superTabs.selectTab(1);this.cd.detectChanges()})}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{document.addEventListener("backbutton",t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},!1)})}ionViewWillLeave(){this.subscription.unsubscribe()}segmentChanged(t){}onOpenAdd(){return(0,P.mG)(this,void 0,void 0,function*(){this.activeTabIndex=0,this.superTabs.selectTab(0),this.cd.detectChanges();let t=null;t=yield this.modalCtrl.create({component:e.p,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!1,componentProps:{modal:t,isNew:!0,currentUser:this.currentUser,durationInHours:1}}),t.present();const{role:r}=yield t.onWillDismiss();"confirm"===r&&(yield this.pendingListPage.getReservation(this.currentUser.customerId,"Pending"))})}doRefreshPending(t){return(0,P.mG)(this,void 0,void 0,function*(){try{this.refreshEvent=t,yield this.pendingListPage.getReservation(this.currentUser.customerId,"Pending").finally(()=>{this.refreshEvent&&(this.refreshEvent.target.complete(),this.refreshEvent=null)})}catch(i){yield this.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})}doRefreshApproved(t){return(0,P.mG)(this,void 0,void 0,function*(){try{this.refreshEvent=t,yield this.approvedListPage.getReservation(this.currentUser.customerId,"Approved").finally(()=>{this.refreshEvent&&(this.refreshEvent.target.complete(),this.refreshEvent=null)})}catch(i){yield this.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})}doRefreshProcess(t){return(0,P.mG)(this,void 0,void 0,function*(){try{this.refreshEvent=t,yield this.processedListPage.getReservation(this.currentUser.customerId,"Processed").finally(()=>{this.refreshEvent&&(this.refreshEvent.target.complete(),this.refreshEvent=null)})}catch(i){yield this.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})}tabChange(t){return(0,P.mG)(this,void 0,void 0,function*(){this.activeTabIndex=t.detail.index,this.cd.detectChanges()})}history(){return(0,P.mG)(this,void 0,void 0,function*(){let t=null;t=yield this.modalCtrl.create({component:O.n,cssClass:"modal-fullscreen",componentProps:{currentUser:this.currentUser}}),t.present(),yield t.onWillDismiss()})}presentAlert(t){return(0,P.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({})).present()})}logout(){this.authService.logout()}isCurrentTab(t){}}return s.\u0275fac=function(t){return new(t||s)(n.Y36(o.BX),n.Y36(o.IN),n.Y36(o.Br),n.Y36(v.e),n.Y36(u.F0),n.Y36(u.gz),n.Y36(p.V),n.Y36(n.sBO),n.Y36(o.t4))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-booking"]],viewQuery:function(t,i){if(1&t&&(n.Gf(E,5),n.Gf(m,5),n.Gf(y,5),n.Gf(_,5)),2&t){let r;n.iGM(r=n.CRH())&&(i.superTabs=r.first),n.iGM(r=n.CRH())&&(i.pendingListPage=r.first),n.iGM(r=n.CRH())&&(i.approvedListPage=r.first),n.iGM(r=n.CRH())&&(i.processedListPage=r.first)}},decls:44,vars:11,consts:[["no-border","","no-shadow",""],["slot","start",2,"width","48px"],[2,"text-align","center"],["slot","end"],[3,"click",4,"ngIf"],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[3,"activeTabIndex","tabChange"],["superTabs",""],["slot","top","color","primary"],["pendingTabButton",""],["slot","start","color","success"],["approvedTabButton",""],["processedTabButton",""],[3,"status","canEdit"],["pendingListPage",""],[3,"status"],["approvedListPage",""],["processedListPage",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click"],[3,"click"],["slot","icon-only","name","time-outline"],["slot","fixed",1,"refresher-custom",3,"ionRefresh"]],template:function(t,i){if(1&t&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar"),n._UZ(2,"div",1),n.TgZ(3,"ion-title",2),n._uU(4,"Booking"),n.qZA(),n.TgZ(5,"ion-buttons",3),n.YNc(6,g,2,0,"ion-button",4),n.qZA()()(),n.TgZ(7,"ion-content"),n.YNc(8,C,2,0,"ion-refresher",5),n.YNc(9,A,2,0,"ion-refresher",5),n.YNc(10,Z,2,0,"ion-refresher",5),n.TgZ(11,"super-tabs",6,7),n.NdJ("tabChange",function(c){return i.tabChange(c)}),n.TgZ(13,"super-tabs-toolbar",8)(14,"super-tab-button",null,9)(16,"ion-badge",10),n._uU(17,"1"),n.qZA(),n.TgZ(18,"ion-label"),n._uU(19,"Pending"),n.qZA()(),n.TgZ(20,"super-tab-button",null,11)(22,"ion-label"),n._uU(23,"Approved"),n.qZA()(),n.TgZ(24,"super-tab-button",null,12)(26,"ion-label"),n._uU(27,"Ongoing"),n.qZA()()(),n.TgZ(28,"super-tabs-container")(29,"super-tab")(30,"ion-content"),n._UZ(31,"app-booking-list-page",13,14),n.qZA()(),n.TgZ(33,"super-tab")(34,"ion-content"),n._UZ(35,"app-booking-list-page",15,16),n.qZA()(),n.TgZ(37,"super-tab")(38,"ion-content"),n._UZ(39,"app-booking-list-page",15,17),n.qZA()()()()(),n.TgZ(41,"div",18)(42,"ion-button",19),n.NdJ("click",function(){return i.isAuthenticated?i.onOpenAdd():i.logout()}),n._uU(43),n.qZA()()),2&t){const r=n.MAs(12);n.xp6(6),n.Q6J("ngIf",i.isAuthenticated),n.xp6(2),n.Q6J("ngIf",!i.isLoading&&0===r.activeTabIndex),n.xp6(1),n.Q6J("ngIf",!i.isLoading&&1===r.activeTabIndex),n.xp6(1),n.Q6J("ngIf",!i.isLoading&&2===r.activeTabIndex),n.xp6(1),n.Q6J("activeTabIndex",i.activeTabIndex),n.xp6(20),n.Q6J("status","Pending")("canEdit",!0),n.xp6(4),n.Q6J("status","Approved"),n.xp6(4),n.Q6J("status","Processed"),n.xp6(3),n.Q6J("disabled",i.isLoading),n.xp6(1),n.Oqu(i.isAuthenticated?"Book new Reservation":"Login to book reservation")}},dependencies:[d.O5,o.yp,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.Q$,o.nJ,o.Wo,o.wd,o.sr,x.L0,x.p7,x.Ex,x.ti,x.Ry,b.p],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0!important}  .mat-tab-group{height:100%;display:flex}  .mat-tab-group .mat-tab-labels{justify-content:space-around}  .mat-tab-group .mat-tab-body-wrapper{display:flex;flex-grow:1;height:100%}.sched-controls-bottom[_ngcontent-%COMP%]{z-index:1000;position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}.list-title[_ngcontent-%COMP%]{margin:10px 25px!important;display:flex}[_nghost-%COMP%]{--super-tabs-toolbar-background: #fff;--st-indicator-color: var(--ion-color-tertiary);--st-base-color-active: var(--ion-color-tertiary);--st-base-color-inactive: var(--ion-color-dark-tint)!important}"]}),s})()},{path:"booking-details",loadChildren:()=>a.e(9206).then(a.bind(a,9206)).then(s=>s.BookingDetailsPageModule)},{path:"add-booking",loadChildren:()=>a.e(7163).then(a.bind(a,7163)).then(s=>s.NewBookingPageModule)},{path:"booking-history",loadChildren:()=>a.e(8777).then(a.bind(a,8777)).then(s=>s.BookingHistoryPageModule)},{path:"booking-list-page",loadChildren:()=>Promise.resolve().then(a.bind(a,4831)).then(s=>s.BookingListPagePageModule)},{path:"booking-item-add",loadChildren:()=>a.e(4718).then(a.bind(a,4718)).then(s=>s.BookingItemAddPageModule)}];let k=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[u.Bz.forChild(L),u.Bz]}),s})();var B=a(5268),U=a(5815),D=a(4831);let N=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[d.ez,f.u5,o.Pc,f.UX,k,B.q,U.d,x.IO,D.BookingListPagePageModule]}),s})()},7220:(J,T,a)=>{a.d(T,{p:()=>N});var d=a(655),f=a(3075),o=a(8779),u=a(567),P=a(8164),e=a(5e3),I=a(2669),O=a(7956),n=a(9709),v=a(2313),p=a(9808),x=a(2081),b=a(7322),E=a(7531),m=a(5641);const y=["reservationStepper"];function _(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-fab",29)(1,"ion-fab-button",1),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onAddItem())}),e._UZ(2,"ion-icon",30),e.qZA()()}}function g(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-card",33),e.NdJ("click",function(){const r=e.CHM(t),c=r.index,h=r.$implicit,M=e.oxw(2);return e.KtG(M.onEditItem(c,h))}),e.TgZ(1,"ion-card-header")(2,"ion-list",23)(3,"ion-item",34)(4,"ion-label")(5,"h3"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-icon",35),e.NdJ("click",function(){const c=e.CHM(t).$implicit,h=e.oxw(2);return e.KtG(h.onRemoveItem(c))}),e.qZA()()()(),e.TgZ(8,"ion-card-content")(9,"h3"),e._uU(10),e.qZA()()()}if(2&s){const t=l.$implicit;e.xp6(6),e.AsE("x",t.quantity,"\xa0-\xa0",t.orderItemType.name,""),e.xp6(4),e.Oqu(t.remarks)}}function C(s,l){if(1&s&&(e.TgZ(0,"div",31),e.YNc(1,g,11,3,"ion-card",32),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.orderItems)}}function A(s,l){1&s&&(e.TgZ(0,"div",36),e._UZ(1,"ion-icon",37),e.TgZ(2,"h3"),e._uU(3,"No items added yet"),e.qZA()())}function Z(s,l){if(1&s&&e._UZ(0,"ion-datetime",38,39),2&s){const t=e.oxw();e.Q6J("min",t.minDate)("showDefaultButtons",!0)}}function G(s,l){if(1&s&&(e.TgZ(0,"ion-select-option",40),e._uU(1),e.qZA()),2&s){const t=l.$implicit;e.Q6J("value",t.reservationLevelId),e.xp6(1),e.Oqu(t.name)}}function L(s,l){1&s&&(e.TgZ(0,"ion-select-option",41),e._uU(1,"No options available"),e.qZA())}function k(s,l){1&s&&(e.TgZ(0,"span",42),e._uU(1," No selected option "),e.qZA())}function B(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-button",43),e.NdJ("click",function(){e.CHM(t),e.oxw();const r=e.MAs(11);return e.KtG(r.next())}),e._uU(1,"Next"),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("disabled",t.isLoading||0===t.orderItems.length)}}function U(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-button",43),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.save())}),e._uU(1,"Save"),e.qZA()}if(2&s){const t=e.oxw(),i=e.MAs(45);e.Q6J("disabled",t.isLoading||!t.reservationForm.valid||!i.checked)}}function D(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onBack())}),e._uU(1,"Back"),e.qZA()}}let N=(()=>{class s{constructor(t,i,r,c,h,M,S,R,K){this.modalCtrl=t,this.formBuilder=i,this.alertController=r,this.reservationService=c,this.actionSheetController=h,this.pageLoaderService=M,this.appconfig=S,this.platform=R,this.sanitizer=K,this.isNew=!1,this.details={},this.isSubmitting=!1,this.isLoading=!1,this.isLoadingFilter=!1,this.allowToClose=!1,this.availableTimeSlot=[],this.orderItems=[],this.reservationLevelOptions=[],this.timeSlotConfig={start:"08:00",end:"17:00",notAvailableHours:["12:00"],durationInHours:1,dayOfWeekNotAvailable:["Sunday","Wednesday","Saturday"]},this.currentDate=new Date,this.minDate=new Date((new Date).setDate(this.currentDate.getDate())).toISOString(),this.timeSlotConfig.notAvailableHours=this.appconfig.config.reservationConfig.timeSlotNotAvailableHours,this.timeSlotConfig.dayOfWeekNotAvailable=this.appconfig.config.reservationConfig.dayOfWeekNotAvailable,this.platform.backButton.subscribeWithPriority(-1,()=>{this.cancel()}),this.initFilter()}get formData(){return Object.assign(Object.assign({},this.reservationForm.value),{customerId:this.currentUser.customerId,orderItems:this.orderItems.map(t=>({orderItemTypeId:t.orderItemType.orderItemTypeId,remarks:t.remarks,quantity:t.quantity}))})}get errorControls(){return this.reservationForm.controls}initFilter(){this.isLoadingFilter=!0,(0,u.D)([]).subscribe(([])=>{},t=>console.error(t),()=>{this.isLoadingFilter=!1,this.reservationLevelOptions=this.appconfig.config.lookup.reservationLevel.map(t=>({reservationLevelId:t.reservationLevelId,name:t.name}))})}ngOnInit(){this.itemForm=this.formBuilder.group({}),this.reservationForm=this.formBuilder.group({reqCompletionDate:[this.minDate,f.kI.required],reservationLevelId:[null,f.kI.required],description:[null,f.kI.required]}),this.allowToClose=!0,this.subscription=this.platform.backButton.subscribeWithPriority(9999,t=>{this.modal.canDismiss&&this.cancel(),this.pageLoaderService.close()})}ionViewWillLeave(){this.subscription.unsubscribe()}onSelectFocus(t,i){console.log("click"),setTimeout(()=>{t.setValue(i)},1e3)}onBack(){this.reservationStepper.previous()}cancel(){0!==this.reservationStepper.selectedIndex?this.onBack():(this.modal.canDismiss=!0,this.modalCtrl.dismiss(null,"cancel"))}save(){return(0,d.mG)(this,void 0,void 0,function*(){const t=this.formData;try{yield this.pageLoaderService.open("Booking reservation..."),this.isSubmitting=!0,this.reservationService.createReservation(t).subscribe(i=>(0,d.mG)(this,void 0,void 0,function*(){i.success?(yield this.presentAlert({header:"Booked!",buttons:["OK"]}),this.isSubmitting=!1,this.modal.canDismiss=!0,this.modal.dismiss({success:!0,data:i.data},"confirm"),yield this.pageLoaderService.close()):(yield this.pageLoaderService.close(),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]}))}),i=>(0,d.mG)(this,void 0,void 0,function*(){yield this.pageLoaderService.close(),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})}))}catch(i){yield this.pageLoaderService.close(),this.isSubmitting=!1,yield this.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})}})}onAddItem(){return(0,d.mG)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:P.Q,cssClass:"modal-fullscreen",componentProps:{canEdit:!0,currentUser:this.currentUser}});t.present(),yield t.onWillDismiss().then(i=>(0,d.mG)(this,void 0,void 0,function*(){i.data&&this.orderItems.push(i.data.data)}))})}onEditItem(t,i){return(0,d.mG)(this,void 0,void 0,function*(){const r=yield this.modalCtrl.create({component:P.Q,cssClass:"modal-fullscreen",componentProps:{details:i,canEdit:!0,currentUser:this.currentUser}});r.present(),yield r.onWillDismiss().then(c=>(0,d.mG)(this,void 0,void 0,function*(){c.data&&(this.orderItems[t]=c.data.data)}))})}onRemoveItem(t){return(0,d.mG)(this,void 0,void 0,function*(){this.orderItems=this.orderItems.filter(i=>i.orderItemId!==t.orderItemId)})}presentAlert(t){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create(t)).present()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(o.IN),e.Y36(f.qu),e.Y36(o.Br),e.Y36(I.D),e.Y36(o.BX),e.Y36(O.p),e.Y36(n._),e.Y36(o.t4),e.Y36(v.H7))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-new-booking"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y,5),e.Gf(o.ki,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.reservationStepper=r.first),e.iGM(r=e.CRH())&&(i.timeSlotModal=r.first)}},decls:52,vars:20,consts:[["slot","start"],[3,"click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],[1,"ion-padding"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],["animationDuration","200",3,"linear"],["reservationStepper",""],[3,"stepControl"],["class","item-list",4,"ngIf","ngIfElse"],["noItemAdded",""],["id","reservationForm",3,"formGroup","ngSubmit"],[1,"form-field-group"],["id","open-reqCompletionDate-date-picker","fill","outline","lines","none",3,"disabled"],["trigger","open-reqCompletionDate-date-picker",3,"cssClass"],["fill","outline",3,"disabled"],["slot","start","formControlName","reservationLevelId","placeholder","Select from options"],["slot","start",3,"value",4,"ngFor","ngForOf"],["classs","no-result-option","disabled","","slot","start",4,"ngIf"],["class","error",4,"ngIf"],["appearance","outline"],["matInput","","type","text","placeholder","Description","formControlName","description",2,"height","200px"],["lines","none"],["mode","ios","slot","start"],["termsAndConditionCheck",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click",4,"ngIf"],["color","primary","size","large","expand","block","fill","outline",3,"click",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],["name","add"],[1,"item-list"],["mode","ios",3,"click",4,"ngFor","ngForOf"],["mode","ios",3,"click"],[1,"ion-no-padding"],["name","trash-outline",3,"click"],[1,"list-none"],["name","document-text-outline"],["presentation","date","size","cover","formControlName","reqCompletionDate",3,"min","showDefaultButtons"],["reqCompletionDateCtrl",""],["slot","start",3,"value"],["classs","no-result-option","disabled","","slot","start"],[1,"error"],["color","primary","size","large","expand","block",3,"disabled","click"],["color","primary","size","large","expand","block","fill","outline",3,"click"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return i.cancel()}),e._UZ(4,"ion-icon",2),e.qZA()(),e.TgZ(5,"ion-title",3),e._uU(6,"New Reservation"),e.qZA(),e._UZ(7,"div",4),e.qZA()(),e.TgZ(8,"ion-content",5),e.YNc(9,_,3,0,"ion-fab",6),e.TgZ(10,"mat-stepper",7,8)(12,"mat-step",9)(13,"h3"),e._uU(14,"What items to book?"),e.qZA(),e.YNc(15,C,2,1,"div",10),e.YNc(16,A,4,0,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(18,"mat-step",9)(19,"form",12),e.NdJ("ngSubmit",function(){e.CHM(r);const h=e.MAs(11);return e.KtG(!!i.reservationForm.valid&&h.next())}),e.TgZ(20,"fieldset")(21,"div",13)(22,"mat-label",0),e._uU(23,"Select required completion date"),e.qZA(),e.TgZ(24,"ion-item",14)(25,"ion-label"),e._uU(26),e.ALo(27,"date"),e.qZA()(),e.TgZ(28,"ion-modal",15),e.YNc(29,Z,2,2,"ng-template"),e.qZA()(),e.TgZ(30,"div",13)(31,"mat-label",0),e._uU(32,"Important"),e.qZA(),e.TgZ(33,"ion-item",16)(34,"ion-select",17),e.YNc(35,G,2,2,"ion-select-option",18),e.YNc(36,L,2,0,"ion-select-option",19),e.qZA()(),e.YNc(37,k,2,0,"span",20),e.qZA(),e.TgZ(38,"div",13)(39,"mat-form-field",21)(40,"mat-label"),e._uU(41,"Description"),e.qZA(),e._UZ(42,"textarea",22),e.qZA()(),e.TgZ(43,"ion-item",23),e._UZ(44,"ion-checkbox",24,25),e.TgZ(46,"ion-label"),e._uU(47,"I agree to the terms and conditions"),e.qZA()()()()()()(),e.TgZ(48,"div",26),e.YNc(49,B,2,1,"ion-button",27),e.YNc(50,U,2,1,"ion-button",27),e.YNc(51,D,2,0,"ion-button",28),e.qZA()}if(2&t){const r=e.MAs(11),c=e.MAs(17);e.xp6(9),e.Q6J("ngIf",0===r.selectedIndex),e.xp6(1),e.Q6J("linear",!1),e.xp6(2),e.Q6J("stepControl",i.reservationForm),e.xp6(3),e.Q6J("ngIf",i.orderItems.length>0)("ngIfElse",c),e.xp6(3),e.Q6J("stepControl",i.reservationForm),e.xp6(1),e.Q6J("formGroup",i.reservationForm),e.xp6(5),e.Q6J("disabled",i.isLoading),e.xp6(2),e.Oqu(e.xi3(27,17,i.formData.reqCompletionDate,"EEEE, MMMM d, y")),e.xp6(2),e.Q6J("cssClass","bottom-end"),e.xp6(5),e.Q6J("disabled",i.isLoading),e.xp6(2),e.Q6J("ngForOf",i.reservationLevelOptions),e.xp6(1),e.Q6J("ngIf",0===i.reservationLevelOptions.length),e.xp6(1),e.Q6J("ngIf",i.errorControls.reservationLevelId.touched&&i.errorControls.reservationLevelId.errors&&i.errorControls.reservationLevelId.errors.required),e.xp6(12),e.Q6J("ngIf",0===r.selectedIndex),e.xp6(1),e.Q6J("ngIf",1===r.selectedIndex),e.xp6(1),e.Q6J("ngIf",r.selectedIndex>0&&r.selectedIndex<=1)}},dependencies:[p.sg,p.O5,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,o.YG,o.Sm,o.PM,o.FN,o.Zi,o.nz,o.W2,o.x4,o.IJ,o.W4,o.Gu,o.gu,o.Ie,o.Q$,o.q_,o.t9,o.n0,o.wd,o.sr,o.ki,o.w,o.QI,x.C0,x.Vq,b.KE,b.hX,E.Nt,m.f,p.uU],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0!important}.sched-controls-bottom[_ngcontent-%COMP%]{position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}  mat-stepper .mat-horizontal-stepper-header-container{display:none!important}  mat-stepper .mat-horizontal-content-container{padding:0!important}ion-radio-group.hide-radio-controls[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{visibility:hidden!important}.photos[_ngcontent-%COMP%]{row-gap:10px;display:flex;flex-direction:column;box-sizing:border-box;width:100%;padding:10px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:auto}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{position:absolute;right:30px;width:40px;height:40px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:10px;object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75}.item-list[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.item-list[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px!important}.add-item-button[_ngcontent-%COMP%]{position:fixed;bottom:90px;right:20px;box-sizing:border-box;display:flex;height:80px;width:80px;align-items:center}.add-item-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 50%;height:100%;width:100%;margin:0!important}.list-none[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;flex-grow:1;justify-content:center;align-items:center;margin-top:50%}.list-none[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}ion-checkbox[_ngcontent-%COMP%]{margin-right:10px!important}"]}),s})()}}]);