"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4140],{3077:(R,A,c)=>{c.d(A,{n:()=>b});var u=c(5861),P=c(8305),o=c(4650),p=c(603),y=c(2669),e=c(6895);function Z(v,m){if(1&v){const l=o.EpF();o.TgZ(0,"ion-refresher",10),o.NdJ("ionRefresh",function(f){o.CHM(l);const O=o.oxw();return o.KtG(O.doRefresh(f))}),o._UZ(1,"ion-refresher-content"),o.qZA()}}function T(v,m){if(1&v){const l=o.EpF();o.TgZ(0,"ion-item",12),o.NdJ("click",function(){const O=o.CHM(l).$implicit,k=o.oxw(3);return o.KtG(k.onOpenDetails(O))}),o.TgZ(1,"ion-label")(2,"div")(3,"h3")(4,"strong"),o._uU(5),o.TgZ(6,"ion-text",13),o._uU(7),o.qZA()()()()()()}if(2&v){const l=m.$implicit;let _;o.xp6(5),o.hij("",l.reservationCode," "),o.xp6(1),o.Q6J("color",("1"===l.reservationStatus.reservationStatusId||"4"===l.reservationStatus.reservationStatusId?"danger":"")||("2"===l.reservationStatus.reservationStatusId?"primary":"")||(null!==(_="3"===l.reservationStatus.reservationStatusId)&&void 0!==_?_:"tertiary")),o.xp6(1),o.hij(" ",l.reservationStatus.name," ")}}function r(v,m){if(1&v&&(o.TgZ(0,"ion-list"),o.YNc(1,T,8,3,"ion-item",11),o.qZA()),2&v){const l=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",l.reservation)}}function h(v,m){if(1&v&&(o.TgZ(0,"div"),o.YNc(1,r,2,1,"ion-list",7),o.qZA()),2&v){const l=o.oxw(),_=o.MAs(14);o.xp6(1),o.Q6J("ngIf",l.reservation.length>0)("ngIfElse",_)}}function I(v,m){1&v&&(o.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"div")(4,"h3",14),o._UZ(5,"ion-skeleton-text",15),o.qZA(),o.TgZ(6,"p"),o._UZ(7,"ion-skeleton-text",15),o.qZA(),o.TgZ(8,"p",16),o._UZ(9,"ion-skeleton-text",15),o.qZA()()()()()),2&v&&(o.xp6(5),o.Q6J("animated",!0),o.xp6(2),o.Q6J("animated",!0),o.xp6(2),o.Q6J("animated",!0))}function C(v,m){1&v&&(o.TgZ(0,"div",17),o._UZ(1,"ion-icon",18),o.TgZ(2,"h3",19),o._uU(3,"No recent reservations to show"),o.qZA()())}class b{actionSheetController;modalCtrl;alertController;reservationService;currentUser;isLoading=!1;reservation=[];message="";refreshEvent;currentPage=1;limit=10;totalUnreadNotification=0;constructor(m,l,_,f){this.actionSheetController=m,this.modalCtrl=l,this.alertController=_,this.reservationService=f}ngOnInit(){this.initHistory(this.currentUser.customerId)}initHistory(m){var l=this;return(0,u.Z)(function*(){try{l.isLoading=!0,l.reservationService.getByStatus({customerId:m,reservationStatus:"Completed,Cancelled"}).subscribe(function(){var _=(0,u.Z)(function*(f){f.success?(l.reservation=f.data,l.refreshEvent&&(l.refreshEvent.target.complete(),l.refreshEvent=null),l.isLoading=!1):yield l.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(f.message)?f.message[0]:f.message,buttons:["OK"]})});return function(f){return _.apply(this,arguments)}}(),function(){var _=(0,u.Z)(function*(f){yield l.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(f.message)?f.message[0]:f.message,buttons:["OK"]}),l.isLoading=!1});return function(f){return _.apply(this,arguments)}}())}catch(_){yield l.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(_.message)?_.message[0]:_.message,buttons:["OK"]})}})()}onOpenDetails(m){var l=this;return(0,u.Z)(function*(){const _=yield l.modalCtrl.create({component:P.O,cssClass:"modal-fullscreen",componentProps:{details:m,currentUser:l.currentUser}});_.present(),yield _.onWillDismiss()})()}loadMore(){var m=this;return(0,u.Z)(function*(){m.currentPage=m.currentPage+1,m.initHistory(m.currentUser.customerId)})()}doRefresh(m){var l=this;return(0,u.Z)(function*(){l.reservation=[],l.currentPage=1,l.refreshEvent=m,l.initHistory(l.currentUser.customerId)})()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}presentAlert(m){var l=this;return(0,u.Z)(function*(){yield(yield l.alertController.create(m)).present()})()}static \u0275fac=function(l){return new(l||b)(o.Y36(p.BX),o.Y36(p.IN),o.Y36(p.Br),o.Y36(y.D))};static \u0275cmp=o.Xpm({type:b,selectors:[["app-booking-history"]],decls:15,vars:4,consts:[["no-border","","no-shadow",""],["slot","start"],[3,"disabled","click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseLoading",""],["elseNoData",""],["slot","fixed",1,"refresher-custom",3,"ionRefresh"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",3,"click"],[3,"color"],[1,"title",2,"width","50%"],[3,"animated"],[2,"width","40%"],[1,"no-records"],["name","search-outline",2,"font-size","4em"],[1,"text"]],template:function(l,_){if(1&l&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),o.NdJ("click",function(){return _.cancel()}),o._UZ(4,"ion-icon",3),o.qZA()(),o.TgZ(5,"ion-title",4),o._uU(6,"History"),o.qZA(),o._UZ(7,"div",5),o.qZA()(),o.TgZ(8,"ion-content"),o.YNc(9,Z,2,0,"ion-refresher",6),o.YNc(10,h,2,2,"div",7),o.YNc(11,I,10,3,"ng-template",null,8,o.W1O),o.YNc(13,C,4,0,"ng-template",null,9,o.W1O),o.qZA()),2&l){const f=o.MAs(12);o.xp6(3),o.Q6J("disabled",_.isLoading),o.xp6(6),o.Q6J("ngIf",!_.isLoading),o.xp6(1),o.Q6J("ngIf",!_.isLoading)("ngIfElse",f)}},dependencies:[e.sg,e.O5,p.YG,p.Sm,p.W2,p.Gu,p.gu,p.Ie,p.Q$,p.q_,p.nJ,p.Wo,p.CK,p.yW,p.wd,p.sr],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}ion-item[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:rgba(204,204,204,.8)!important}ion-label[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.no-records[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px}  ion-item .un-read .title{font-weight:800px!important}"]})}},4831:(R,A,c)=>{c.r(A),c.d(A,{BookingListPagePageModule:()=>h});var u=c(6895),P=c(4006),o=c(603),p=c(9773),y=c(7903),e=c(4650);const Z=[{path:"",component:y.p}];class T{static \u0275fac=function(b){return new(b||T)};static \u0275mod=e.oAB({type:T});static \u0275inj=e.cJS({imports:[p.Bz.forChild(Z),p.Bz]})}var r=c(5815);class h{static \u0275fac=function(b){return new(b||h)};static \u0275mod=e.oAB({type:h});static \u0275inj=e.cJS({imports:[u.ez,P.u5,o.Pc,T,r.d]})}},7903:(R,A,c)=>{c.d(A,{p:()=>L});var u=c(5861),P=c(8349),o=c(5671),p=c(8305),y=c(8164),e=c(4650),Z=c(2669),T=c(3746),r=c(8791),h=c(603),I=c(9773),C=c(7956),b=c(6895);function v(d,a){if(1&d){const t=e.EpF();e.TgZ(0,"ion-icon",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,i=e.oxw().$implicit,g=e.oxw(3);return e.KtG(i.orderItems.length>1?g.onRemoveItem(s):g.cancelReservation(i.reservationId))}),e.qZA()}}function m(d,a){if(1&d){const t=e.EpF();e.TgZ(0,"ion-list",17)(1,"ion-item",18)(2,"ion-label",10),e.NdJ("click",function(){const i=e.CHM(t).$implicit,g=e.oxw().$implicit,x=e.oxw(3);return e.KtG(x.onOpenItemDetails(g,i))}),e.TgZ(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"div",19)(6,"h2",20),e._uU(7),e.qZA()()(),e.YNc(8,v,1,0,"ion-icon",21),e.qZA()()}if(2&d){const t=a.$implicit,n=e.oxw().$implicit,s=e.oxw(3);e.Q6J("lines",n.orderItems.length>1?"":"none"),e.xp6(4),e.AsE("x",t.quantity,"\xa0-\xa0",t.orderItemType.name,""),e.xp6(3),e.Oqu(t.remarks),e.xp6(1),e.Q6J("ngIf",s.canEdit)}}function l(d,a){if(1&d){const t=e.EpF();e.TgZ(0,"ion-list",8)(1,"ion-item",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,i=e.oxw(3);return e.KtG(i.onAddItem(s))}),e._UZ(2,"ion-icon",24),e.TgZ(3,"ion-label")(4,"h3"),e._uU(5,"Add more item"),e.qZA()()()()}}function _(d,a){if(1&d&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Required completion date: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&d){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,t.reqCompletionDate,"MMMM dd, yyyy"))}}function f(d,a){if(1&d&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Estimated completion date: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&d){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(e.xi3(6,1,t.estCompletionDate,"MMMM dd, yyyy"))}}function O(d,a){if(1&d&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Assigned person: "),e.qZA(),e.TgZ(3,"h3")(4,"strong"),e._uU(5),e.qZA()()()),2&d){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.staff.name+" "+t.staff.name)}}function k(d,a){if(1&d&&(e.TgZ(0,"h3")(1,"ion-text",25),e._uU(2),e.qZA()()),2&d){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.reservationLevel.name)}}function B(d,a){if(1&d){const t=e.EpF();e.TgZ(0,"ion-list",8)(1,"ion-item",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,i=e.oxw(3);return e.KtG(i.cancelReservation(s.reservationId))}),e._UZ(2,"ion-icon",26),e.TgZ(3,"ion-label")(4,"h3")(5,"ion-text",27),e._uU(6,"Cancel"),e.qZA()()()()()}}function M(d,a){if(1&d){const t=e.EpF();e.TgZ(0,"ion-card",7)(1,"ion-card-header")(2,"ion-list",8)(3,"ion-item",9)(4,"ion-label")(5,"h2",10),e.NdJ("click",function(){const i=e.CHM(t).$implicit,g=e.oxw(3);return e.KtG(g.onOpenDetails(i))}),e._uU(6),e.qZA()(),e.TgZ(7,"ion-badge",11),e._uU(8),e.qZA()()()(),e.TgZ(9,"ion-card-content"),e.YNc(10,m,9,5,"ion-list",12),e.YNc(11,l,6,0,"ion-list",13),e.qZA(),e.TgZ(12,"div",14)(13,"div",15),e.NdJ("click",function(){const i=e.CHM(t).$implicit,g=e.oxw(3);return e.KtG(g.onOpenDetails(i))}),e.YNc(14,_,7,4,"div",16),e.YNc(15,f,7,4,"div",16),e.YNc(16,O,6,1,"div",16),e.YNc(17,k,3,1,"h3",16),e.qZA(),e.YNc(18,B,7,0,"ion-list",13),e.qZA()()}if(2&d){const t=a.$implicit,n=e.oxw(3);e.xp6(6),e.Oqu(t.reservationCode),e.xp6(1),e.Q6J("color",n.status.toLowerCase().includes("approved")?"success":n.status.toLowerCase().includes("pending")?"warning":"secondary"),e.xp6(1),e.Oqu(n.status),e.xp6(2),e.Q6J("ngForOf",t.orderItems),e.xp6(1),e.Q6J("ngIf",n.canEdit),e.xp6(3),e.Q6J("ngIf","1"===t.reservationStatus.reservationStatusId||"2"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf","3"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf","3"===t.reservationStatus.reservationStatusId&&t.staff&&t.staff.name),e.xp6(1),e.Q6J("ngIf","1"===t.reservationStatus.reservationStatusId||"2"===t.reservationStatus.reservationStatusId),e.xp6(1),e.Q6J("ngIf",n.canEdit)}}function D(d,a){if(1&d&&(e.TgZ(0,"div",5),e.YNc(1,M,19,10,"ion-card",6),e.qZA()),2&d){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.reservationData)}}function E(d,a){if(1&d&&(e.TgZ(0,"div",28),e._UZ(1,"ion-icon",29),e.TgZ(2,"h3"),e._uU(3),e.qZA()()),2&d){const t=e.oxw(2);e.xp6(3),e.hij("No ",t.status.toLowerCase()," records yet")}}function S(d,a){if(1&d&&(e.TgZ(0,"div",2),e.YNc(1,D,2,1,"div",3),e.YNc(2,E,4,1,"ng-template",null,4,e.W1O),e.qZA()),2&d){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.reservationData.length>0)("ngIfElse",t)}}function N(d,a){1&d&&(e.TgZ(0,"div",2)(1,"div",5)(2,"ion-card",7),e._UZ(3,"ion-card-content"),e.qZA()()())}class L{reservationService;storageService;orderItemService;alertController;modalCtrl;router;pageLoaderService;actionSheetController;status="";canEdit=!1;isLoading=!1;reservationData=[];currentUser;constructor(a,t,n,s,i,g,x,U){this.reservationService=a,this.storageService=t,this.orderItemService=n,this.alertController=s,this.modalCtrl=i,this.router=g,this.pageLoaderService=x,this.actionSheetController=U,this.currentUser=this.storageService.getLoginUser()}get isAuthenticated(){const a=this.storageService.getLoginUser();return a&&a.customerId&&a.userId&&a.accessToken&&""!==a.customerId&&""!==a.userId&&""!==a.accessToken}ngOnInit(){}getReservation(a,t){var n=this;return(0,u.Z)(function*(){try{n.isLoading=!0,n.reservationService.getByStatus({customerId:a,reservationStatus:t}).subscribe(function(){var s=(0,u.Z)(function*(i){i.success?(n.reservationData=i.data.map(g=>(g.orderItems=g.orderItems.filter(x=>x.entityStatus.entityStatusId===P.n.ACTIVE.toString()),g)),n.isLoading=!1):yield n.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})});return function(i){return s.apply(this,arguments)}}(),function(){var s=(0,u.Z)(function*(i){yield n.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]}),n.isLoading=!1});return function(i){return s.apply(this,arguments)}}())}catch(s){yield n.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})}})()}showMenu(a){var t=this;return(0,u.Z)(function*(){const n=yield t.actionSheetController.create({cssClass:"sched-card-action-sheet",buttons:[{text:"Details",handler:(i=(0,u.Z)(function*(){t.onOpenDetails(a),n.dismiss()}),function(){return i.apply(this,arguments)})},{text:"Back",handler:function(){var i=(0,u.Z)(function*(){n.dismiss()});return function(){return i.apply(this,arguments)}}()}]});var i;yield n.present(),yield n.onDidDismiss()})()}onOpenDetails(a){var t=this;return(0,u.Z)(function*(){const n=yield t.modalCtrl.create({component:p.O,cssClass:"modal-fullscreen",componentProps:{details:a,currentUser:t.currentUser}});n.present(),yield n.onWillDismiss().then(function(){var s=(0,u.Z)(function*(i){t.router.navigate(["/booking"],{replaceUrl:!0})});return function(i){return s.apply(this,arguments)}}())})()}onAddItem(a){var t=this;return(0,u.Z)(function*(){const n=yield t.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{reservation:a,canEdit:!0,currentUser:t.currentUser}});n.present(),yield n.onWillDismiss().then(function(){var s=(0,u.Z)(function*(i){i.data&&(yield t.getReservation(t.currentUser.customerId,t.status))});return function(i){return s.apply(this,arguments)}}())})()}onOpenItemDetails(a,t){var n=this;return(0,u.Z)(function*(){const s=yield n.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{details:t,reservation:a,canEdit:n.canEdit,currentUser:n.currentUser}});s.present();const{role:g}=yield s.onWillDismiss();"confirm"===g&&(yield n.getReservation(n.currentUser.customerId,n.status))})()}onRemoveItem(a){var t=this;return(0,u.Z)(function*(){try{yield t.presentAlert({header:"Are you sure you want to remove this item?",buttons:[{text:"CANCEL",role:"cancel"},{text:"YES Continue",role:"confirm",handler:(n=(0,u.Z)(function*(){yield t.pageLoaderService.open("Processing please wait..."),t.isLoading=!0,t.orderItemService.delete(a.orderItemId).subscribe(function(){var s=(0,u.Z)(function*(i){i.success?(yield t.pageLoaderService.close(),yield t.presentAlert({header:"Item deleted!",buttons:["OK"]}),t.isLoading=!1,yield t.pageLoaderService.close(),yield t.getReservation(t.currentUser.customerId,t.status)):(yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]}))});return function(i){return s.apply(this,arguments)}}(),function(){var s=(0,u.Z)(function*(i){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})});return function(i){return s.apply(this,arguments)}}())}),function(){return n.apply(this,arguments)})}]})}catch(n){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(n.message)?n.message[0]:n.message,buttons:["OK"]})}var n})()}cancelReservation(a){var t=this;return(0,u.Z)(function*(){try{yield t.presentAlert({header:"Are you sure you want to cancel reservation?",buttons:[{text:"CANCEL",role:"cancel"},{text:"YES Continue",role:"confirm",handler:(n=(0,u.Z)(function*(){yield t.pageLoaderService.open("Processing please wait..."),t.isLoading=!0,t.reservationService.updateReservationStatus({reservationId:a,reservationStatusId:o.C.CANCELLED}).subscribe(function(){var s=(0,u.Z)(function*(i){i.success?(yield t.pageLoaderService.close(),yield t.presentAlert({header:"Reservation cancelled!",buttons:["OK"]}),t.isLoading=!1,yield t.getReservation(t.currentUser.customerId,t.status)):(yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]}))});return function(i){return s.apply(this,arguments)}}(),function(){var s=(0,u.Z)(function*(i){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})});return function(i){return s.apply(this,arguments)}}())}),function(){return n.apply(this,arguments)})}]})}catch(n){yield t.pageLoaderService.close(),t.isLoading=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(n.message)?n.message[0]:n.message,buttons:["OK"]})}var n})()}presentAlert(a){var t=this;return(0,u.Z)(function*(){yield(yield t.alertController.create(a)).present()})()}static \u0275fac=function(t){return new(t||L)(e.Y36(Z.D),e.Y36(T.V),e.Y36(r.R),e.Y36(h.Br),e.Y36(h.IN),e.Y36(I.F0),e.Y36(C.p),e.Y36(h.BX))};static \u0275cmp=e.Xpm({type:L,selectors:[["app-booking-list-page"]],inputs:{status:"status",canEdit:"canEdit"},decls:3,vars:2,consts:[["class","booking-list",4,"ngIf","ngIfElse"],["elseLoading",""],[1,"booking-list"],["class","list-data",4,"ngIf","ngIfElse"],["elseNoData",""],[1,"list-data"],["mode","ios",4,"ngFor","ngForOf"],["mode","ios"],["lines","none"],[1,"ion-no-padding"],[3,"click"],["slot","end",2,"color","#fff",3,"color"],[3,"lines",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[1,"action"],[2,"display","flex","flex-direction","column","width","100%",3,"click"],[4,"ngIf"],[3,"lines"],["button","","detail","false",1,"ion-no-padding"],[1,"attribute"],[1,"remarks"],["name","trash-outline",3,"click",4,"ngIf"],["name","trash-outline",3,"click"],["button","","detail","false",1,"ion-no-padding",3,"click"],["name","add-outline"],["color","warning"],["name","close-outline","color","danger"],["color","danger"],[1,"list-none"],["name","document-text-outline"]],template:function(t,n){if(1&t&&(e.YNc(0,S,4,2,"div",0),e.YNc(1,N,4,0,"ng-template",null,1,e.W1O)),2&t){const s=e.MAs(2);e.Q6J("ngIf",!n.isLoading)("ngIfElse",s)}},dependencies:[b.sg,b.O5,h.yp,h.PM,h.FN,h.Zi,h.gu,h.Ie,h.Q$,h.q_,h.yW,b.uU]})}},4140:(R,A,c)=>{c.r(A),c.d(A,{BookingPageModule:()=>d});var u=c(6895),P=c(4006),o=c(603),p=c(9773),y=c(5861),e=c(7220),Z=c(567),T=c(3077),r=c(4650),h=c(263),I=c(3746),C=c(5252),b=c(7903);const v=["superTabs"],m=["pendingListPage"],l=["approvedListPage"],_=["processedListPage"];function f(a,t){if(1&a){const n=r.EpF();r.TgZ(0,"ion-button",20),r.NdJ("click",function(){r.CHM(n);const i=r.oxw();return r.KtG(i.history())}),r._UZ(1,"ion-icon",21),r.qZA()}}function O(a,t){if(1&a){const n=r.EpF();r.TgZ(0,"ion-refresher",22),r.NdJ("ionRefresh",function(i){r.CHM(n);const g=r.oxw();return r.KtG(g.doRefreshPending(i))}),r._UZ(1,"ion-refresher-content"),r.qZA()}}function k(a,t){if(1&a){const n=r.EpF();r.TgZ(0,"ion-refresher",22),r.NdJ("ionRefresh",function(i){r.CHM(n);const g=r.oxw();return r.KtG(g.doRefreshApproved(i))}),r._UZ(1,"ion-refresher-content"),r.qZA()}}function B(a,t){if(1&a){const n=r.EpF();r.TgZ(0,"ion-refresher",22),r.NdJ("ionRefresh",function(i){r.CHM(n);const g=r.oxw();return r.KtG(g.doRefreshProcess(i))}),r._UZ(1,"ion-refresher-content"),r.qZA()}}class M{actionSheetController;modalCtrl;alertController;authService;router;route;storageService;cd;platform;selectedStatus=["Pending","Approved"];currentUser;isLoading=!1;reservationData=[];message="";refreshEvent;subscription;activeTabIndex=1;superTabs;pendingListPage;approvedListPage;processedListPage;constructor(t,n,s,i,g,x,U,J,K){this.actionSheetController=t,this.modalCtrl=n,this.alertController=s,this.authService=i,this.router=g,this.route=x,this.storageService=U,this.cd=J,this.platform=K,this.currentUser=this.storageService.getLoginUser()}get isAuthenticated(){const t=this.storageService.getLoginUser();return t&&t.customerId&&t.userId&&t.accessToken&&""!==t.customerId&&""!==t.userId&&""!==t.accessToken}ngOnInit(){}ngAfterViewInit(){var t=this;return(0,y.Z)(function*(){if(t.isAuthenticated)try{(0,Z.D)([t.pendingListPage.getReservation(t.currentUser.customerId,"Pending"),t.approvedListPage.getReservation(t.currentUser.customerId,"Approved"),t.processedListPage.getReservation(t.currentUser.customerId,"Processed")]).toPromise()}catch{yield t.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}ionViewWillEnter(){var t=this;return(0,y.Z)(function*(){const n=t.route.snapshot.queryParamMap.get("status"),s=t.route.snapshot.queryParamMap.get("reservationId");if(n&&n.toLowerCase().includes("approved")){if(t.activeTabIndex=1,t.superTabs.selectTab(1),s&&"''"!==s){yield t.approvedListPage.getReservation(t.currentUser.customerId,"Approved");const i=t.approvedListPage.reservationData.filter(g=>g.reservationId===s)[0];i&&(yield t.approvedListPage.onOpenDetails(i))}}else if(n&&n.toLowerCase().includes("processed")){if(t.activeTabIndex=2,t.superTabs.selectTab(2),s&&"''"!==s){yield t.processedListPage.getReservation(t.currentUser.customerId,"Processed");const i=t.processedListPage.reservationData.filter(g=>g.reservationId===s)[0];yield t.processedListPage.onOpenDetails(i)}}else t.activeTabIndex=1,t.superTabs.selectTab(1);t.cd.detectChanges()})()}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{document.addEventListener("backbutton",t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},!1)})}ionViewWillLeave(){this.subscription.unsubscribe()}segmentChanged(t){}onOpenAdd(){var t=this;return(0,y.Z)(function*(){t.activeTabIndex=0,t.superTabs.selectTab(0),t.cd.detectChanges();let n=null;n=yield t.modalCtrl.create({component:e.p,cssClass:"modal-fullscreen",backdropDismiss:!1,canDismiss:!1,componentProps:{modal:n,isNew:!0,currentUser:t.currentUser,durationInHours:1}}),n.present();const{role:i}=yield n.onWillDismiss();"confirm"===i&&(yield t.pendingListPage.getReservation(t.currentUser.customerId,"Pending"))})()}doRefreshPending(t){var n=this;return(0,y.Z)(function*(){try{n.refreshEvent=t,yield n.pendingListPage.getReservation(n.currentUser.customerId,"Pending").finally(()=>{n.refreshEvent&&(n.refreshEvent.target.complete(),n.refreshEvent=null)})}catch{yield n.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}doRefreshApproved(t){var n=this;return(0,y.Z)(function*(){try{n.refreshEvent=t,yield n.approvedListPage.getReservation(n.currentUser.customerId,"Approved").finally(()=>{n.refreshEvent&&(n.refreshEvent.target.complete(),n.refreshEvent=null)})}catch{yield n.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}doRefreshProcess(t){var n=this;return(0,y.Z)(function*(){try{n.refreshEvent=t,yield n.processedListPage.getReservation(n.currentUser.customerId,"Processed").finally(()=>{n.refreshEvent&&(n.refreshEvent.target.complete(),n.refreshEvent=null)})}catch{yield n.presentAlert({header:"Try again!",message:"Error loading reseravation",buttons:["OK"]})}})()}tabChange(t){var n=this;return(0,y.Z)(function*(){n.activeTabIndex=t.detail.index,n.cd.detectChanges()})()}history(){var t=this;return(0,y.Z)(function*(){let n=null;n=yield t.modalCtrl.create({component:T.n,cssClass:"modal-fullscreen",componentProps:{currentUser:t.currentUser}}),n.present(),yield n.onWillDismiss()})()}presentAlert(t){var n=this;return(0,y.Z)(function*(){yield(yield n.alertController.create({})).present()})()}logout(){this.authService.logout()}isCurrentTab(t){}static \u0275fac=function(n){return new(n||M)(r.Y36(o.BX),r.Y36(o.IN),r.Y36(o.Br),r.Y36(h.e),r.Y36(p.F0),r.Y36(p.gz),r.Y36(I.V),r.Y36(r.sBO),r.Y36(o.t4))};static \u0275cmp=r.Xpm({type:M,selectors:[["app-booking"]],viewQuery:function(n,s){if(1&n&&(r.Gf(v,5),r.Gf(m,5),r.Gf(l,5),r.Gf(_,5)),2&n){let i;r.iGM(i=r.CRH())&&(s.superTabs=i.first),r.iGM(i=r.CRH())&&(s.pendingListPage=i.first),r.iGM(i=r.CRH())&&(s.approvedListPage=i.first),r.iGM(i=r.CRH())&&(s.processedListPage=i.first)}},decls:44,vars:11,consts:[["no-border","","no-shadow",""],["slot","start",2,"width","48px"],[2,"text-align","center"],["slot","end"],[3,"click",4,"ngIf"],["slot","fixed","class","refresher-custom",3,"ionRefresh",4,"ngIf"],[3,"activeTabIndex","tabChange"],["superTabs",""],["slot","top","color","primary"],["pendingTabButton",""],["slot","start","color","success"],["approvedTabButton",""],["processedTabButton",""],[3,"status","canEdit"],["pendingListPage",""],[3,"status"],["approvedListPage",""],["processedListPage",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click"],[3,"click"],["slot","icon-only","name","time-outline"],["slot","fixed",1,"refresher-custom",3,"ionRefresh"]],template:function(n,s){if(1&n&&(r.TgZ(0,"ion-header",0)(1,"ion-toolbar"),r._UZ(2,"div",1),r.TgZ(3,"ion-title",2),r._uU(4,"Booking"),r.qZA(),r.TgZ(5,"ion-buttons",3),r.YNc(6,f,2,0,"ion-button",4),r.qZA()()(),r.TgZ(7,"ion-content"),r.YNc(8,O,2,0,"ion-refresher",5),r.YNc(9,k,2,0,"ion-refresher",5),r.YNc(10,B,2,0,"ion-refresher",5),r.TgZ(11,"super-tabs",6,7),r.NdJ("tabChange",function(g){return s.tabChange(g)}),r.TgZ(13,"super-tabs-toolbar",8)(14,"super-tab-button",null,9)(16,"ion-badge",10),r._uU(17,"1"),r.qZA(),r.TgZ(18,"ion-label"),r._uU(19,"Pending"),r.qZA()(),r.TgZ(20,"super-tab-button",null,11)(22,"ion-label"),r._uU(23,"Approved"),r.qZA()(),r.TgZ(24,"super-tab-button",null,12)(26,"ion-label"),r._uU(27,"Ongoing"),r.qZA()()(),r.TgZ(28,"super-tabs-container")(29,"super-tab")(30,"ion-content"),r._UZ(31,"app-booking-list-page",13,14),r.qZA()(),r.TgZ(33,"super-tab")(34,"ion-content"),r._UZ(35,"app-booking-list-page",15,16),r.qZA()(),r.TgZ(37,"super-tab")(38,"ion-content"),r._UZ(39,"app-booking-list-page",15,17),r.qZA()()()()(),r.TgZ(41,"div",18)(42,"ion-button",19),r.NdJ("click",function(){return s.isAuthenticated?s.onOpenAdd():s.logout()}),r._uU(43),r.qZA()()),2&n){const i=r.MAs(12);r.xp6(6),r.Q6J("ngIf",s.isAuthenticated),r.xp6(2),r.Q6J("ngIf",!s.isLoading&&0===i.activeTabIndex),r.xp6(1),r.Q6J("ngIf",!s.isLoading&&1===i.activeTabIndex),r.xp6(1),r.Q6J("ngIf",!s.isLoading&&2===i.activeTabIndex),r.xp6(1),r.Q6J("activeTabIndex",s.activeTabIndex),r.xp6(20),r.Q6J("status","Pending")("canEdit",!0),r.xp6(4),r.Q6J("status","Approved"),r.xp6(4),r.Q6J("status","Processed"),r.xp6(3),r.Q6J("disabled",s.isLoading),r.xp6(1),r.Oqu(s.isAuthenticated?"Book new Reservation":"Login to book reservation")}},dependencies:[u.O5,o.yp,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.Q$,o.nJ,o.Wo,o.wd,o.sr,C.L0,C.p7,C.Ex,C.ti,C.Ry,b.p],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0!important}  .mat-tab-group{height:100%;display:flex}  .mat-tab-group .mat-tab-labels{justify-content:space-around}  .mat-tab-group .mat-tab-body-wrapper{display:flex;flex-grow:1;height:100%}.sched-controls-bottom[_ngcontent-%COMP%]{z-index:1000;position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}.list-title[_ngcontent-%COMP%]{margin:10px 25px!important;display:flex}[_nghost-%COMP%]{--super-tabs-toolbar-background: #fff;--st-indicator-color: var(--ion-color-tertiary);--st-base-color-active: var(--ion-color-tertiary);--st-base-color-inactive: var(--ion-color-dark-tint)!important}"]})}const D=[{path:"",component:M},{path:"booking-details",loadChildren:()=>c.e(9206).then(c.bind(c,9206)).then(a=>a.BookingDetailsPageModule)},{path:"add-booking",loadChildren:()=>c.e(7163).then(c.bind(c,7163)).then(a=>a.NewBookingPageModule)},{path:"booking-history",loadChildren:()=>c.e(8777).then(c.bind(c,8777)).then(a=>a.BookingHistoryPageModule)},{path:"booking-list-page",loadChildren:()=>Promise.resolve().then(c.bind(c,4831)).then(a=>a.BookingListPagePageModule)},{path:"booking-item-add",loadChildren:()=>c.e(4718).then(c.bind(c,4718)).then(a=>a.BookingItemAddPageModule)},{path:"booking-item-attachments",loadChildren:()=>c.e(7986).then(c.bind(c,7986)).then(a=>a.BookingItemAttachmentsPageModule)}];class E{static \u0275fac=function(n){return new(n||E)};static \u0275mod=r.oAB({type:E});static \u0275inj=r.cJS({imports:[p.Bz.forChild(D),p.Bz]})}var S=c(5457),N=c(5815),L=c(4831);class d{static \u0275fac=function(n){return new(n||d)};static \u0275mod=r.oAB({type:d});static \u0275inj=r.cJS({imports:[u.ez,P.u5,o.Pc,P.UX,E,S.q,N.d,C.IO,L.BookingListPagePageModule]})}},7220:(R,A,c)=>{c.d(A,{p:()=>d});var u=c(5861),P=c(4006),o=c(603),p=c(567),y=c(8164),e=c(4650),Z=c(2669),T=c(7956),r=c(9709),h=c(1481),I=c(6895),C=c(6257),b=c(9549),v=c(4144),m=c(5641);const l=["reservationStepper"];function _(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"ion-fab",29)(1,"ion-fab-button",1),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onAddItem())}),e._UZ(2,"ion-icon",30),e.qZA()()}}function f(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"ion-card",33),e.NdJ("click",function(){const i=e.CHM(n),g=i.index,x=i.$implicit,U=e.oxw(2);return e.KtG(U.onEditItem(g,x))}),e.TgZ(1,"ion-card-header")(2,"ion-list",23)(3,"ion-item",34)(4,"ion-label")(5,"h3"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-icon",35),e.NdJ("click",function(){const g=e.CHM(n).$implicit,x=e.oxw(2);return e.KtG(x.onRemoveItem(g))}),e.qZA()()()(),e.TgZ(8,"ion-card-content")(9,"h3"),e._uU(10),e.qZA()()()}if(2&a){const n=t.$implicit;e.xp6(6),e.AsE("x",n.quantity,"\xa0-\xa0",n.orderItemType.name,""),e.xp6(4),e.Oqu(n.remarks)}}function O(a,t){if(1&a&&(e.TgZ(0,"div",31),e.YNc(1,f,11,3,"ion-card",32),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.orderItems)}}function k(a,t){1&a&&(e.TgZ(0,"div",36),e._UZ(1,"ion-icon",37),e.TgZ(2,"h3"),e._uU(3,"No items added yet"),e.qZA()())}function B(a,t){if(1&a&&e._UZ(0,"ion-datetime",38,39),2&a){const n=e.oxw();e.Q6J("min",n.minDate)("showDefaultButtons",!0)}}function M(a,t){if(1&a&&(e.TgZ(0,"ion-select-option",40),e._uU(1),e.qZA()),2&a){const n=t.$implicit;e.Q6J("value",n.reservationLevelId),e.xp6(1),e.Oqu(n.name)}}function D(a,t){1&a&&(e.TgZ(0,"ion-select-option",41),e._uU(1,"No options available"),e.qZA())}function E(a,t){1&a&&(e.TgZ(0,"span",42),e._uU(1," No selected option "),e.qZA())}function S(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"ion-button",43),e.NdJ("click",function(){e.CHM(n),e.oxw();const i=e.MAs(11);return e.KtG(i.next())}),e._uU(1,"Next"),e.qZA()}if(2&a){const n=e.oxw();e.Q6J("disabled",n.isLoading||0===n.orderItems.length)}}function N(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"ion-button",43),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.save())}),e._uU(1,"Save"),e.qZA()}if(2&a){const n=e.oxw(),s=e.MAs(45);e.Q6J("disabled",n.isLoading||!n.reservationForm.valid||!s.checked)}}function L(a,t){if(1&a){const n=e.EpF();e.TgZ(0,"ion-button",44),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onBack())}),e._uU(1,"Back"),e.qZA()}}class d{modalCtrl;formBuilder;alertController;reservationService;actionSheetController;pageLoaderService;appconfig;platform;sanitizer;reservationStepper;timeSlotModal;isNew=!1;modal;currentUser;name;details={};itemForm;reservationForm;descriptionForm;isSubmitting=!1;isLoading=!1;isLoadingFilter=!1;error;subscription;allowToClose=!1;availableTimeSlot=[];orderItems=[];reservationLevelOptions=[];timeSlotConfig={start:"08:00",end:"17:00",notAvailableHours:["12:00"],durationInHours:1,dayOfWeekNotAvailable:["Sunday","Wednesday","Saturday"]};currentDate=new Date;minDate=new Date((new Date).setDate(this.currentDate.getDate())).toISOString();constructor(t,n,s,i,g,x,U,J,K){this.modalCtrl=t,this.formBuilder=n,this.alertController=s,this.reservationService=i,this.actionSheetController=g,this.pageLoaderService=x,this.appconfig=U,this.platform=J,this.sanitizer=K,this.timeSlotConfig.notAvailableHours=this.appconfig.config.reservationConfig.timeSlotNotAvailableHours,this.timeSlotConfig.dayOfWeekNotAvailable=this.appconfig.config.reservationConfig.dayOfWeekNotAvailable,this.platform.backButton.subscribeWithPriority(-1,()=>{this.cancel()}),this.initFilter()}get formData(){return{...this.reservationForm.value,customerId:this.currentUser.customerId,orderItems:this.orderItems.map(t=>({orderItemTypeId:t.orderItemType.orderItemTypeId,remarks:t.remarks,quantity:t.quantity,orderItemAttachments:t.orderItemAttachments}))}}get errorControls(){return this.reservationForm.controls}initFilter(){this.isLoadingFilter=!0,(0,p.D)([]).subscribe(([])=>{},t=>console.error(t),()=>{this.isLoadingFilter=!1,this.reservationLevelOptions=this.appconfig.config.lookup.reservationLevel.map(t=>({reservationLevelId:t.reservationLevelId,name:t.name}))})}ngOnInit(){this.itemForm=this.formBuilder.group({}),this.reservationForm=this.formBuilder.group({reqCompletionDate:[this.minDate,P.kI.required],reservationLevelId:[null,P.kI.required],description:[null,P.kI.required]}),this.allowToClose=!0,this.subscription=this.platform.backButton.subscribeWithPriority(9999,t=>{this.modal.canDismiss&&this.cancel(),this.pageLoaderService.close()})}ionViewWillLeave(){this.subscription.unsubscribe()}onSelectFocus(t,n){console.log("click"),setTimeout(()=>{t.setValue(n)},1e3)}onBack(){this.reservationStepper.previous()}cancel(){0!==this.reservationStepper.selectedIndex?this.onBack():(this.modal.canDismiss=!0,this.modalCtrl.dismiss(null,"cancel"))}save(){var t=this;return(0,u.Z)(function*(){const n=t.formData;try{yield t.pageLoaderService.open("Booking reservation..."),t.isSubmitting=!0,t.reservationService.createReservation(n).subscribe(function(){var s=(0,u.Z)(function*(i){i.success?(yield t.presentAlert({header:"Booked!",buttons:["OK"]}),t.isSubmitting=!1,t.modal.canDismiss=!0,t.modal.dismiss({success:!0,data:i.data},"confirm"),yield t.pageLoaderService.close()):(yield t.pageLoaderService.close(),t.isSubmitting=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]}))});return function(i){return s.apply(this,arguments)}}(),function(){var s=(0,u.Z)(function*(i){yield t.pageLoaderService.close(),t.isSubmitting=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(i.message)?i.message[0]:i.message,buttons:["OK"]})});return function(i){return s.apply(this,arguments)}}())}catch(s){yield t.pageLoaderService.close(),t.isSubmitting=!1,yield t.presentAlert({header:"Try again!",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})}})()}onAddItem(){var t=this;return(0,u.Z)(function*(){const n=yield t.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{canEdit:!0,currentUser:t.currentUser}});n.present(),yield n.onWillDismiss().then(function(){var s=(0,u.Z)(function*(i){i.data&&t.orderItems.push(i.data.data)});return function(i){return s.apply(this,arguments)}}())})()}onEditItem(t,n){var s=this;return(0,u.Z)(function*(){const i=yield s.modalCtrl.create({component:y.Q,cssClass:"modal-fullscreen",componentProps:{details:n,orderItemAttachments:n.orderItemAttachments,canEdit:!0,currentUser:s.currentUser}});i.present(),yield i.onWillDismiss().then(function(){var g=(0,u.Z)(function*(x){x.data&&(s.orderItems[t]=x.data.data)});return function(x){return g.apply(this,arguments)}}())})()}onRemoveItem(t){var n=this;return(0,u.Z)(function*(){n.orderItems=n.orderItems.filter(s=>s.orderItemId!==t.orderItemId)})()}presentAlert(t){var n=this;return(0,u.Z)(function*(){yield(yield n.alertController.create(t)).present()})()}static \u0275fac=function(n){return new(n||d)(e.Y36(o.IN),e.Y36(P.qu),e.Y36(o.Br),e.Y36(Z.D),e.Y36(o.BX),e.Y36(T.p),e.Y36(r._),e.Y36(o.t4),e.Y36(h.H7))};static \u0275cmp=e.Xpm({type:d,selectors:[["app-new-booking"]],viewQuery:function(n,s){if(1&n&&(e.Gf(l,5),e.Gf(o.ki,5)),2&n){let i;e.iGM(i=e.CRH())&&(s.reservationStepper=i.first),e.iGM(i=e.CRH())&&(s.timeSlotModal=i.first)}},decls:52,vars:20,consts:[["slot","start"],[3,"click"],["name","chevron-back"],[2,"text-align","center"],["slot","end",2,"width","48px"],[1,"ion-padding"],["slot","fixed","vertical","bottom","horizontal","end",4,"ngIf"],["animationDuration","200",3,"linear"],["reservationStepper",""],[3,"stepControl"],["class","item-list",4,"ngIf","ngIfElse"],["noItemAdded",""],["id","reservationForm",3,"formGroup","ngSubmit"],[1,"form-field-group"],["id","open-reqCompletionDate-date-picker","fill","outline","lines","none",3,"disabled"],["trigger","open-reqCompletionDate-date-picker",3,"cssClass"],["fill","outline",3,"disabled"],["slot","start","formControlName","reservationLevelId","placeholder","Select from options"],["slot","start",3,"value",4,"ngFor","ngForOf"],["classs","no-result-option","disabled","","slot","start",4,"ngIf"],["class","error",4,"ngIf"],["appearance","outline"],["matInput","","type","text","placeholder","Description","formControlName","description",2,"height","200px"],["lines","none"],["mode","ios","slot","start"],["termsAndConditionCheck",""],[1,"sched-controls-bottom"],["color","primary","size","large","expand","block",3,"disabled","click",4,"ngIf"],["color","primary","size","large","expand","block","fill","outline",3,"click",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],["name","add"],[1,"item-list"],["mode","ios",3,"click",4,"ngFor","ngForOf"],["mode","ios",3,"click"],[1,"ion-no-padding"],["name","trash-outline",3,"click"],[1,"list-none"],["name","document-text-outline"],["presentation","date","size","cover","formControlName","reqCompletionDate",3,"min","showDefaultButtons"],["reqCompletionDateCtrl",""],["slot","start",3,"value"],["classs","no-result-option","disabled","","slot","start"],[1,"error"],["color","primary","size","large","expand","block",3,"disabled","click"],["color","primary","size","large","expand","block","fill","outline",3,"click"]],template:function(n,s){if(1&n){const i=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return s.cancel()}),e._UZ(4,"ion-icon",2),e.qZA()(),e.TgZ(5,"ion-title",3),e._uU(6,"New Reservation"),e.qZA(),e._UZ(7,"div",4),e.qZA()(),e.TgZ(8,"ion-content",5),e.YNc(9,_,3,0,"ion-fab",6),e.TgZ(10,"mat-stepper",7,8)(12,"mat-step",9)(13,"h3"),e._uU(14,"What items to book?"),e.qZA(),e.YNc(15,O,2,1,"div",10),e.YNc(16,k,4,0,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(18,"mat-step",9)(19,"form",12),e.NdJ("ngSubmit",function(){e.CHM(i);const x=e.MAs(11);return e.KtG(!!s.reservationForm.valid&&x.next())}),e.TgZ(20,"fieldset")(21,"div",13)(22,"mat-label",0),e._uU(23,"Select required completion date"),e.qZA(),e.TgZ(24,"ion-item",14)(25,"ion-label"),e._uU(26),e.ALo(27,"date"),e.qZA()(),e.TgZ(28,"ion-modal",15),e.YNc(29,B,2,2,"ng-template"),e.qZA()(),e.TgZ(30,"div",13)(31,"mat-label",0),e._uU(32,"Important"),e.qZA(),e.TgZ(33,"ion-item",16)(34,"ion-select",17),e.YNc(35,M,2,2,"ion-select-option",18),e.YNc(36,D,2,0,"ion-select-option",19),e.qZA()(),e.YNc(37,E,2,0,"span",20),e.qZA(),e.TgZ(38,"div",13)(39,"mat-form-field",21)(40,"mat-label"),e._uU(41,"Description"),e.qZA(),e._UZ(42,"textarea",22),e.qZA()(),e.TgZ(43,"ion-item",23),e._UZ(44,"ion-checkbox",24,25),e.TgZ(46,"ion-label"),e._uU(47,"I agree to the terms and conditions"),e.qZA()()()()()()(),e.TgZ(48,"div",26),e.YNc(49,S,2,1,"ion-button",27),e.YNc(50,N,2,1,"ion-button",27),e.YNc(51,L,2,0,"ion-button",28),e.qZA()}if(2&n){const i=e.MAs(11),g=e.MAs(17);e.xp6(9),e.Q6J("ngIf",0===i.selectedIndex),e.xp6(1),e.Q6J("linear",!1),e.xp6(2),e.Q6J("stepControl",s.reservationForm),e.xp6(3),e.Q6J("ngIf",s.orderItems.length>0)("ngIfElse",g),e.xp6(3),e.Q6J("stepControl",s.reservationForm),e.xp6(1),e.Q6J("formGroup",s.reservationForm),e.xp6(5),e.Q6J("disabled",s.isLoading),e.xp6(2),e.Oqu(e.xi3(27,17,s.formData.reqCompletionDate,"EEEE, MMMM d, y")),e.xp6(2),e.Q6J("cssClass","bottom-end"),e.xp6(5),e.Q6J("disabled",s.isLoading),e.xp6(2),e.Q6J("ngForOf",s.reservationLevelOptions),e.xp6(1),e.Q6J("ngIf",0===s.reservationLevelOptions.length),e.xp6(1),e.Q6J("ngIf",s.errorControls.reservationLevelId.touched&&s.errorControls.reservationLevelId.errors&&s.errorControls.reservationLevelId.errors.required),e.xp6(12),e.Q6J("ngIf",0===i.selectedIndex),e.xp6(1),e.Q6J("ngIf",1===i.selectedIndex),e.xp6(1),e.Q6J("ngIf",i.selectedIndex>0&&i.selectedIndex<=1)}},dependencies:[I.sg,I.O5,P._Y,P.Fj,P.JJ,P.JL,P.sg,P.u,o.YG,o.Sm,o.PM,o.FN,o.Zi,o.nz,o.W2,o.x4,o.IJ,o.W4,o.Gu,o.gu,o.Ie,o.Q$,o.q_,o.t9,o.n0,o.wd,o.sr,o.ki,o.w,o.QI,C.C0,C.Vq,b.KE,b.hX,v.Nt,m.f,I.uU],styles:["ion-header[_ngcontent-%COMP%]:after{background-image:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin:0!important}.sched-controls-bottom[_ngcontent-%COMP%]{position:relative;display:block;width:100%;background:#ffffff;padding:5px 10px;box-shadow:0 3px 10px #0003}.sched-controls-bottom[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:45px;font-size:15px}  mat-stepper .mat-horizontal-stepper-header-container{display:none!important}  mat-stepper .mat-horizontal-content-container{padding:0!important}ion-radio-group.hide-radio-controls[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{visibility:hidden!important}.photos[_ngcontent-%COMP%]{row-gap:10px;display:flex;flex-direction:column;box-sizing:border-box;width:100%;padding:10px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:auto}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{position:absolute;right:30px;width:40px;height:40px}.photos[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:10px;object-position:center;object-fit:contain;box-shadow:0 0 10px #7a7a7a75}.item-list[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}.item-list[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px!important}.add-item-button[_ngcontent-%COMP%]{position:fixed;bottom:90px;right:20px;box-sizing:border-box;display:flex;height:80px;width:80px;align-items:center}.add-item-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 50%;height:100%;width:100%;margin:0!important}.list-none[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;flex-grow:1;justify-content:center;align-items:center;margin-top:50%}.list-none[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}ion-checkbox[_ngcontent-%COMP%]{margin-right:10px!important}"]})}}}]);