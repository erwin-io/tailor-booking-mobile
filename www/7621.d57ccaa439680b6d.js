"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7621],{7956:(C,g,n)=>{n.d(g,{p:()=>l});var d=n(5861),o=n(4650),f=n(603);class p{message="Loading...";constructor(){}ngOnInit(){}static \u0275fac=function(i){return new(i||p)};static \u0275cmp=o.Xpm({type:p,selectors:[["app-page-loader"]],decls:5,vars:1,consts:[[1,"container"],[1,"holder"],["color","primary"]],template:function(i,y){1&i&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"ion-spinner",2),o.TgZ(3,"span"),o._uU(4),o.qZA()()()),2&i&&(o.xp6(4),o.Oqu(y.message))},dependencies:[f.PQ],styles:[".container{height:100%;display:flex;align-items:center;flex-direction:column;justify-content:center}.container .holder{display:flex;align-items:center;gap:10px;flex-direction:column;font-size:20px;text-shadow:none!important}\n"],encapsulation:2})}class l{modalCtrl;modal;constructor(c){this.modalCtrl=c}open(c){var i=this;return(0,d.Z)(function*(){i.modal&&(yield i.modal.dismiss()),i.modal=yield i.modalCtrl.create({component:p,id:"page-loader",cssClass:"modal-fullscreen",canDismiss:!1,componentProps:{message:c}}),i.modal.present()})()}close(){var c=this;return(0,d.Z)(function*(){c.modal.canDismiss=!0,yield c.modal.dismiss()})()}static \u0275fac=function(i){return new(i||l)(o.LFG(f.IN))};static \u0275prov=o.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}},7621:(C,g,n)=>{n.r(g),n.d(g,{VerifyOtpPageModule:()=>v});var d=n(6895),o=n(4006),f=n(603),p=n(9773),l=n(5861),t=n(4650),c=n(263),i=n(8386),y=n(3746),P=n(792),x=n(9709),M=n(7956),S=n(4859),O=n(9549),T=n(4144);class m{formBuilder;router;authService;userService;alertController;storageService;loaderService;appconfig;pageLoaderService;isSubmitting=!1;verifyOtpForm;userId;constructor(e,a,s,r,h,b,F,U,w){this.formBuilder=e,this.router=a,this.authService=s,this.userService=r,this.alertController=h,this.storageService=b,this.loaderService=F,this.appconfig=U,this.pageLoaderService=w}get formData(){return{...this.verifyOtpForm.value,userId:this.userId}}ngOnInit(){window.history.state&&window.history.state.data&&window.history.state.data.userId?this.userId=window.history.state.data.userId:this.router.navigate(["/login"],{replaceUrl:!0}),this.verifyOtpForm=this.formBuilder.group({otp:[null,o.kI.required]})}onFormSubmit(){var e=this;return(0,l.Z)(function*(){if(!e.verifyOtpForm.valid)return;const a=e.formData;try{e.isSubmitting=!0,yield e.pageLoaderService.open("Verifying please wait..."),e.authService.verifyOtp(a).subscribe(function(){var s=(0,l.Z)(function*(r){yield e.pageLoaderService.close(),r.success?(e.storageService.saveRefreshToken(r.data.accessToken),e.storageService.saveAccessToken(r.data.refreshToken),e.storageService.saveTotalUnreadNotif(r.data.totalUnreadNotif),e.storageService.saveLoginUser(r.data),e.router.navigate(["/"],{replaceUrl:!0}),e.isSubmitting=!1):(e.isSubmitting=!1,yield e.presentAlert({header:"Try again!",message:Array.isArray(r.message)?r.message[0]:r.message,buttons:["OK"]}))});return function(r){return s.apply(this,arguments)}}(),function(){var s=(0,l.Z)(function*(r){yield e.pageLoaderService.close(),e.isSubmitting=!1,yield e.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(r.message)?r.message[0]:r.message,buttons:["OK"]})});return function(r){return s.apply(this,arguments)}}())}catch(s){yield e.pageLoaderService.close(),e.isSubmitting=!1,yield e.presentAlert({header:"Try again!",subHeader:"",message:Array.isArray(s.message)?s.message[0]:s.message,buttons:["OK"]})}})()}presentAlert(e){var a=this;return(0,l.Z)(function*(){yield(yield a.alertController.create(e)).present()})()}static \u0275fac=function(a){return new(a||m)(t.Y36(o.qu),t.Y36(p.F0),t.Y36(c.e),t.Y36(i.K),t.Y36(f.Br),t.Y36(y.V),t.Y36(P.D),t.Y36(x._),t.Y36(M.p))};static \u0275cmp=t.Xpm({type:m,selectors:[["app-verify-otp"]],decls:20,vars:2,consts:[[1,"verify-otp","container"],[1,"form-container"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"form-field-group"],[1,"verify-otp-text"],["appearance","outline"],["matInput","","type","text","placeholder","OTP","formControlName","otp","oninput","this.value = this.value.toLowerCase()"],[1,"action"],["type","submit","mat-flat-button","","color","primary"],[1,"verify-otp-footer"],["routerLink","/login","replaceUrl","true"]],template:function(a,s){1&a&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"form",2),t.NdJ("ngSubmit",function(){return s.onFormSubmit()}),t.TgZ(4,"fieldset",3)(5,"div",4)(6,"span",5),t._uU(7,"Verify OTP"),t.qZA()(),t.TgZ(8,"div",4)(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"OTP"),t.qZA(),t._UZ(12,"input",7),t.qZA()(),t.TgZ(13,"div",8)(14,"button",9),t._uU(15,"Verify"),t.qZA()()()()(),t.TgZ(16,"div",10)(17,"span")(18,"a",11),t._uU(19,"Back to login"),t.qZA()()()()()),2&a&&(t.xp6(3),t.Q6J("formGroup",s.verifyOtpForm),t.xp6(1),t.Q6J("disabled",s.isSubmitting))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.W2,f.Fo,p.yS,S.lW,O.KE,O.hX,T.Nt],styles:[".container[_ngcontent-%COMP%]{height:100%;display:flex;padding:0 40px!important}.container.verify-otp[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-start!important}.container.verify-otp[_ngcontent-%COMP%]   .welcome[_ngcontent-%COMP%]{text-transform:uppercase;white-space:pre;overflow:visible;font-weight:400;font-style:normal;font-family:Sumana,serif;color:#247881;font-size:23px;letter-spacing:0px;line-height:1.2;text-align:center;margin:0 0 25px!important}.container.verify-otp[_ngcontent-%COMP%]   .app_banner[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:104px;justify-content:center;margin-bottom:57px!important}.container.verify-otp[_ngcontent-%COMP%]   .app_banner[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:299px}.container.verify-otp[_ngcontent-%COMP%]   .app_banner[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;background-repeat:no-repeat;background-position:center center;background-size:cover}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-text[_ngcontent-%COMP%]{text-align:center}.container.verify-otp[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container.verify-otp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;letter-spacing:0px;line-height:1.2}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:row;justify-content:center;align-items:center;width:100%!important}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;row-gap:5px}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex-grow:1}.container.verify-otp[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:53px;font-size:16px;letter-spacing:0px;line-height:1.2}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-footer[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;height:103px;justify-content:flex-end;padding:20px 0}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-footer[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#000!important}.container.verify-otp[_ngcontent-%COMP%]   .verify-otp-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}"]})}const Z=[{path:"",component:m}];class u{static \u0275fac=function(a){return new(a||u)};static \u0275mod=t.oAB({type:u});static \u0275inj=t.cJS({imports:[p.Bz.forChild(Z),p.Bz]})}var A=n(5457);class v{static \u0275fac=function(a){return new(a||v)};static \u0275mod=t.oAB({type:v});static \u0275inj=t.cJS({imports:[d.ez,o.u5,o.UX,f.Pc,u,A.q]})}}}]);